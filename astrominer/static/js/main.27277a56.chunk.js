(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],[,,,,,,,,,,,,,function(e,t,n){e.exports=n(31)},,,,,function(e,t,n){},function(e,t,n){},,,function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"distanceBetween",(function(){return h})),n.d(r,"midPoint",(function(){return v})),n.d(r,"normalizeRadian",(function(){return S})),n.d(r,"calcGravity",(function(){return A})),n.d(r,"directionTo",(function(){return T})),n.d(r,"dirComponents",(function(){return P})),n.d(r,"randomInt",(function(){return M})),n.d(r,"randomFloat",(function(){return N})),n.d(r,"randomBool",(function(){return g})),n.d(r,"getPointFrom",(function(){return b})),n.d(r,"getVertexData",(function(){return x})),n.d(r,"toGlobal",(function(){return R})),n.d(r,"keyboardListener",(function(){return L})),n.d(r,"showToast",(function(){return C}));var a={};n.r(a),n.d(a,"BLACK",(function(){return D})),n.d(a,"YELLOW",(function(){return F})),n.d(a,"BLUE",(function(){return U})),n.d(a,"WHITE",(function(){return j})),n.d(a,"DARK_GREY",(function(){return G})),n.d(a,"LIGHT_GREY",(function(){return k})),n.d(a,"GAME_STATE",(function(){return B})),n.d(a,"LOCALSTORAGE_GAME_NAMES_KEY",(function(){return W})),n.d(a,"DB_GAME_PREFIX",(function(){return Y})),n.d(a,"SCREEN_WIDTH",(function(){return q})),n.d(a,"SCREEN_HEIGHT",(function(){return Q})),n.d(a,"HALF_SCREEN_WIDTH",(function(){return X})),n.d(a,"HALF_SCREEN_HEIGHT",(function(){return V})),n.d(a,"MINIMAP_WIDTH",(function(){return K})),n.d(a,"MINIMAP_HEIGHT",(function(){return J})),n.d(a,"HALF_MINIMAP_WIDTH",(function(){return z})),n.d(a,"HALF_MINIMAP_HEIGHT",(function(){return Z})),n.d(a,"MINIMAP_VIEW_WIDTH",(function(){return $})),n.d(a,"MINIMAP_VIEW_HEIGHT",(function(){return ee})),n.d(a,"HALF_MINIMAP_VIEW_WIDTH",(function(){return te})),n.d(a,"HALF_MINIMAP_VIEW_HEIGHT",(function(){return ne})),n.d(a,"MINIMAP_SCALE_X",(function(){return re})),n.d(a,"MINIMAP_SCALE_Y",(function(){return ae})),n.d(a,"MINIMAP_BORDER_COLOR",(function(){return ie})),n.d(a,"MINIMAP_BACKGROUND_COLOR",(function(){return oe})),n.d(a,"MINIMAP_PLANET_COLOR",(function(){return ue})),n.d(a,"MINIMAP_SELECTED_PLANET_COLOR",(function(){return le})),n.d(a,"MINIMAP_BUILDING_COLOR",(function(){return se})),n.d(a,"MINIMAP_SHIP_COLOR",(function(){return ce})),n.d(a,"SPRITESHEET_JSON",(function(){return de})),n.d(a,"ROCK_PLANET_FILE",(function(){return me})),n.d(a,"RED_PLANET_FILE",(function(){return pe})),n.d(a,"PURPLE_PLANET_FILE",(function(){return Ee})),n.d(a,"GREEN_PLANET_FILE",(function(){return fe})),n.d(a,"MINE_FILE",(function(){return we})),n.d(a,"FACTORY_FILE",(function(){return _e})),n.d(a,"SHIP_CARGO_FILE",(function(){return Ie})),n.d(a,"SHIP_EXPLORER_FILE",(function(){return ye})),n.d(a,"SHIP_FAST_FILE",(function(){return he})),n.d(a,"SHIP_SKELETON_FILE",(function(){return ve})),n.d(a,"SHIP_FIGHTER_FILE",(function(){return Se})),n.d(a,"SHIP_HEAVY_FILE",(function(){return Ae})),n.d(a,"SHIP_BALL_FILE",(function(){return Te})),n.d(a,"STAR_BACKGROUND_FILE",(function(){return Pe})),n.d(a,"CRASH_JSON",(function(){return Me})),n.d(a,"CRASH",(function(){return Ne})),n.d(a,"BULLET_FILE",(function(){return ge})),n.d(a,"BULLET_BLUE_FILE",(function(){return be})),n.d(a,"BULLET_STAPLE_FILE",(function(){return xe})),n.d(a,"SHIELD_BLUE_FILE",(function(){return Re})),n.d(a,"ALIEN_SHIP_FILE",(function(){return Le})),n.d(a,"ALIEN_SHIP_SMALL_FILE",(function(){return Ce})),n.d(a,"ALIEN_SHIP_LARGE_FILE",(function(){return Oe})),n.d(a,"ALIEN_SHIP_FIRE_FILE",(function(){return He})),n.d(a,"ALIEN_SHIP_BLUE_FILE",(function(){return De})),n.d(a,"ALIEN_SHIP_LARGE_BLUE_FILE",(function(){return Fe})),n.d(a,"ALIEN_SHIP_BLACK_FILE",(function(){return Ue})),n.d(a,"UNIVERSE_RADIUS",(function(){return je})),n.d(a,"PLANET_CACHE_STEP_SIZE",(function(){return Ge})),n.d(a,"PLANET_CACHE_NUM_STEPS",(function(){return ke})),n.d(a,"PLAYER",(function(){return Be})),n.d(a,"ALIEN",(function(){return We})),n.d(a,"PLAYER_STARTING_RESOURCES",(function(){return Ye})),n.d(a,"GRAVITATIONAL_CONST",(function(){return qe})),n.d(a,"ALLOWED_OVERLAP",(function(){return Qe})),n.d(a,"TAKEOFF_SPEED",(function(){return Xe})),n.d(a,"PLANET_RESOURCE_MAX",(function(){return Ve})),n.d(a,"PLAYER_START_X",(function(){return Ke})),n.d(a,"PLAYER_START_Y",(function(){return Je})),n.d(a,"NUM_ALIENS",(function(){return ze})),n.d(a,"MIN_ALIEN_DIST_TO_PLANET",(function(){return Ze})),n.d(a,"MIN_ALIEN_DIST_TO_ALIEN",(function(){return $e})),n.d(a,"BUILDING_PLACEMENT_ROTATION_INCREMENT",(function(){return et})),n.d(a,"BUILDING_TYPE_MINE",(function(){return tt})),n.d(a,"MINE_SCALE",(function(){return nt})),n.d(a,"MINE_WIDTH",(function(){return rt})),n.d(a,"MINE_ANIMATION_SPEED",(function(){return at})),n.d(a,"MINE_SPEED_TITANIUM",(function(){return it})),n.d(a,"MINE_SPEED_GOLD",(function(){return ot})),n.d(a,"MINE_SPEED_URANIUM",(function(){return ut})),n.d(a,"MINE_COST",(function(){return lt})),n.d(a,"BUILDING_TYPE_FACTORY",(function(){return st})),n.d(a,"FACTORY_COST",(function(){return ct})),n.d(a,"FACTORY_WIDTH",(function(){return dt})),n.d(a,"FACTORY_SCALE",(function(){return mt})),n.d(a,"EQUIP_TYPE_BRAKE",(function(){return pt})),n.d(a,"EQUIP_TYPE_PRIMARY_WEAPON",(function(){return Et})),n.d(a,"EQUIP_TYPE_SECONDARY_WEAPON",(function(){return ft})),n.d(a,"EQUIP_TYPE_THRUSTER",(function(){return wt})),n.d(a,"EQUIP_TYPE_ARMOR",(function(){return _t})),n.d(a,"EQUIP_TYPE_REPAIR_DROID",(function(){return It})),n.d(a,"EQUIP_TYPE_GUNNERY_DROID",(function(){return yt})),n.d(a,"EQUIP_TYPE_SPEED",(function(){return ht})),n.d(a,"EQUIP_TYPE_TURN",(function(){return vt})),n.d(a,"EQUIP_TYPE_STORAGE",(function(){return St})),n.d(a,"THRUST_MOMENTUM",(function(){return At})),n.d(a,"THRUST_BLINK",(function(){return Tt})),n.d(a,"OBJ_EQUIP",(function(){return Pt})),n.d(a,"OBJ_SHIP",(function(){return Mt})),n.d(a,"ALIEN_AI_TURRET",(function(){return Nt})),n.d(a,"ALIEN_AI_CREEPER",(function(){return gt})),n.d(a,"EQUIP_AI_MINE",(function(){return bt})),n.d(a,"EQUIP_AI_TURRET",(function(){return xt})),n.d(a,"EQUIP_AI_MISSILE",(function(){return Rt})),n.d(a,"DIR_AHEAD_OF_SHIP",(function(){return Lt})),n.d(a,"DIR_BEHIND_SHIP",(function(){return Ct})),n.d(a,"EQUIP_BRAKE",(function(){return Ot})),n.d(a,"EQUIP_BLINK_BRAKE",(function(){return Ht})),n.d(a,"EQUIP_SPEED_BOOST",(function(){return Dt})),n.d(a,"EQUIP_TURN_BOOST",(function(){return Ft})),n.d(a,"EQUIP_STORAGE",(function(){return Ut})),n.d(a,"EQUIP_BLASTER",(function(){return jt})),n.d(a,"EQUIP_FAST_BLASTER",(function(){return Gt})),n.d(a,"EQUIP_SPRINKLER_BLASTER",(function(){return kt})),n.d(a,"EQUIP_STREAM_BLASTER",(function(){return Bt})),n.d(a,"EQUIP_THRUSTER",(function(){return Wt})),n.d(a,"EQUIP_BLINK_THRUSTER",(function(){return Yt})),n.d(a,"EQUIP_R2D2",(function(){return qt})),n.d(a,"EQUIP_GUNNERY_DROID",(function(){return Qt})),n.d(a,"EQUIP_ALIEN_BLASTER",(function(){return Xt})),n.d(a,"EQUIP_STAPLE_GUN",(function(){return Vt})),n.d(a,"EQUIP_ARMOR",(function(){return Kt})),n.d(a,"EQUIP_SHIELD",(function(){return Jt})),n.d(a,"SHIP_EXPLORER",(function(){return zt})),n.d(a,"SHIP_CARGO",(function(){return Zt})),n.d(a,"SHIP_FAST",(function(){return $t})),n.d(a,"SHIP_SKELETON",(function(){return en})),n.d(a,"SHIP_HEAVY",(function(){return tn})),n.d(a,"SHIP_FIGHTER",(function(){return nn})),n.d(a,"SHIP_ALIEN_TURRET",(function(){return rn})),n.d(a,"SHIP_ALIEN",(function(){return an})),n.d(a,"SHIP_ALIEN_LARGE",(function(){return on})),n.d(a,"SHIP_ALIEN_FIRE",(function(){return un})),n.d(a,"SHIP_ALIEN_STEALTH",(function(){return ln})),n.d(a,"SHIP_MINE",(function(){return sn})),n.d(a,"SHIP_TURRET",(function(){return cn})),n.d(a,"SHIP_MISSILE",(function(){return dn})),n.d(a,"ALL_SHIPS",(function(){return mn})),n.d(a,"EQUIP_MINE_DEPLOYER",(function(){return pn})),n.d(a,"EQUIP_TURRET_DEPLOYER",(function(){return En})),n.d(a,"EQUIP_MISSILE_LAUNCHER",(function(){return fn})),n.d(a,"EQUIP_BRAKES",(function(){return wn})),n.d(a,"EQUIP_THRUSTERS",(function(){return _n})),n.d(a,"EQUIP_UPGRADES",(function(){return In})),n.d(a,"EQUIP_PRIMARY_WEAPONS",(function(){return yn})),n.d(a,"EQUIP_SECONDARY_WEAPONS",(function(){return hn})),n.d(a,"EQUIP_MISC",(function(){return vn})),n.d(a,"ALL_EQUIP",(function(){return Sn})),n.d(a,"XP_LEVELS",(function(){return An})),n.d(a,"PLANET_DENSITY",(function(){return Tn})),n.d(a,"UNIVERSE_RINGS",(function(){return Pn}));var i={};n.r(i),n.d(i,"createEmptyWorld",(function(){return xn})),n.d(i,"setupWorld",(function(){return Rn})),n.d(i,"setupSpriteContainers",(function(){return Ln})),n.d(i,"createBackground",(function(){return Cn})),n.d(i,"createPlanets",(function(){return On})),n.d(i,"createPlanet",(function(){return Un})),n.d(i,"getPlanetSprite",(function(){return jn})),n.d(i,"getShipSprite",(function(){return Gn})),n.d(i,"getSpriteOrigWithHeight",(function(){return kn})),n.d(i,"getShieldSprite",(function(){return Bn})),n.d(i,"createShip",(function(){return Wn})),n.d(i,"createAlien",(function(){return Yn})),n.d(i,"createAliens",(function(){return qn})),n.d(i,"setupMiniMap",(function(){return Qn})),n.d(i,"click",(function(){return Xn})),n.d(i,"changeGameState",(function(){return Vn})),n.d(i,"runBuildings",(function(){return Kn})),n.d(i,"addAlienXp",(function(){return zn})),n.d(i,"addBlueprint",(function(){return Zn})),n.d(i,"canAfford",(function(){return $n})),n.d(i,"payResourceCost",(function(){return er})),n.d(i,"payResource",(function(){return tr})),n.d(i,"setupExplosionSheet",(function(){return nr})),n.d(i,"createExplosionSprite",(function(){return rr})),n.d(i,"setupPlanetCache",(function(){return ar})),n.d(i,"getPlanetsNear",(function(){return ir}));var o={};n.r(o),n.d(o,"moveAliens",(function(){return or})),n.d(o,"shootAt",(function(){return ur})),n.d(o,"turretAi",(function(){return lr})),n.d(o,"playerTurretAi",(function(){return sr})),n.d(o,"playerMissileAi",(function(){return cr})),n.d(o,"creeperAi",(function(){return dr})),n.d(o,"getNearestAlienTarget",(function(){return mr})),n.d(o,"checkForCollisionWithPlanet",(function(){return pr})),n.d(o,"checkForCollisionWithShip",(function(){return Er}));var u={};n.r(u),n.d(u,"enterFlyState",(function(){return fr})),n.d(u,"flyLoop",(function(){return wr})),n.d(u,"repositionScreen",(function(){return _r})),n.d(u,"coolAllWeapons",(function(){return Ir})),n.d(u,"coolWeapons",(function(){return yr})),n.d(u,"resetWeaponsCool",(function(){return hr})),n.d(u,"runDroids",(function(){return vr})),n.d(u,"shootAtNearestAlien",(function(){return Sr})),n.d(u,"moveBackground",(function(){return Ar})),n.d(u,"planetInView",(function(){return Tr})),n.d(u,"getActiveShield",(function(){return Pr})),n.d(u,"detectCollisionWithPlanet",(function(){return Mr})),n.d(u,"detectCollisionWithAlien",(function(){return Nr})),n.d(u,"getExplosionSprite",(function(){return br})),n.d(u,"destroyShip",(function(){return xr})),n.d(u,"fireWeapon",(function(){return Or})),n.d(u,"firePrimaryWeapon",(function(){return Hr})),n.d(u,"fireSecondaryWeapon",(function(){return Dr})),n.d(u,"enableShield",(function(){return Fr})),n.d(u,"disableShield",(function(){return Ur})),n.d(u,"fireBullet",(function(){return jr})),n.d(u,"moveBullets",(function(){return kr})),n.d(u,"damageShip",(function(){return Yr})),n.d(u,"shipsCollide",(function(){return qr})),n.d(u,"getEquip",(function(){return Qr})),n.d(u,"drawMiniMap",(function(){return Xr})),n.d(u,"clickOnMinimap",(function(){return Vr})),n.d(u,"weaponRange",(function(){return Jr})),n.d(u,"primaryWeaponRange",(function(){return zr}));var l={};n.r(l),n.d(l,"enterManageState",(function(){return Zr})),n.d(l,"manageLoop",(function(){return $r})),n.d(l,"makeBuildingSprite",(function(){return ta})),n.d(l,"buildMine",(function(){return na})),n.d(l,"getBuildingPlacementRotation",(function(){return ra})),n.d(l,"getAvailablePlanetXY",(function(){return aa})),n.d(l,"buildingFits",(function(){return ia})),n.d(l,"transferResource",(function(){return oa})),n.d(l,"buildFactory",(function(){return ua})),n.d(l,"buildShip",(function(){return la})),n.d(l,"switchToShip",(function(){return sa})),n.d(l,"removeShipFromStorage",(function(){return ca})),n.d(l,"addShipToStorage",(function(){return da})),n.d(l,"hasFactory",(function(){return ma})),n.d(l,"buildEquip",(function(){return pa})),n.d(l,"costToRepair",(function(){return Ea})),n.d(l,"repairShip",(function(){return fa})),n.d(l,"addEquip",(function(){return wa})),n.d(l,"moveEquipFromPlanetToShip",(function(){return _a})),n.d(l,"moveEquipFromShipToPlanet",(function(){return Ia})),n.d(l,"removeResource",(function(){return ya})),n.d(l,"canEquip",(function(){return ha}));var s={};n.r(s),n.d(s,"saveLocalStorage",(function(){return va})),n.d(s,"loadLocalStorage",(function(){return Sa})),n.d(s,"loadWorld",(function(){return Ta})),n.d(s,"saveWorld",(function(){return Pa})),n.d(s,"deleteWorld",(function(){return Ma}));var c=n(0),d=n.n(c),m=n(11),p=n.n(m),E=(n(18),n(3)),f=n(4),w=n(6),_=n(5),I=(n(19),n(12)),y=n.n(I);function h(e,t,n,r){return Math.sqrt(Math.pow(e-n,2)+Math.pow(t-r,2))}function v(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]}function S(e){var t=e;return t<0&&(t+=2*Math.PI),t>2*Math.PI&&(t-=2*Math.PI),t}function A(e,t,n){var r=h(e,t,n.x,n.y);r<10&&(r=10);var i=Math.atan2(e-n.x,t-n.y);return{x:a.GRAVITATIONAL_CONST*n.mass/Math.pow(r,2)*-Math.sin(i),y:a.GRAVITATIONAL_CONST*n.mass/Math.pow(r,2)*-Math.cos(i),dir:i}}function T(e,t,n,r){return S(Math.atan2(r-t,n-e))}function P(e,t){return{xAmt:t*Math.cos(e),yAmt:t*Math.sin(e)}}function M(e,t){var n=Math.ceil(e),r=Math.floor(t);return Math.floor(Math.random()*(r-n+1)+n)}function N(e,t){return e+Math.random()*(t-e)}function g(){return Math.random()>.5}function b(e,t,n,r){return{x:e+r*Math.cos(n),y:t+r*Math.sin(n)}}function x(e,t,n){n.calculateVertices();var r=[];return r.push(R(e,t,n.vertexData[0],n.vertexData[1])),r.push(R(e,t,n.vertexData[2],n.vertexData[3])),r.push(R(e,t,n.vertexData[4],n.vertexData[5])),r.push(R(e,t,n.vertexData[6],n.vertexData[7])),r.push(v(r[0],r[1])),r.push(v(r[1],r[2])),r.push(v(r[2],r[3])),r.push(v(r[3],r[0])),r}function R(e,t,n,r){return[e+(n-a.HALF_SCREEN_WIDTH),t+(r-a.HALF_SCREEN_HEIGHT)]}function L(e){var t={};t.value=e,t.isDown=!1,t.isUp=!0,t.press=void 0,t.release=void 0,t.downHandler=function(e){e.key===t.value&&(t.isUp&&t.press&&t.press(),t.isDown=!0,t.isUp=!1)},t.upHandler=function(e){e.key===t.value&&(t.isDown&&t.release&&t.release(),t.isDown=!1,t.isUp=!0)};var n=t.downHandler.bind(t),r=t.upHandler.bind(t);return window.addEventListener("keydown",n,!1),window.addEventListener("keyup",r,!1),t.unsubscribe=function(){window.removeEventListener("keydown",n),window.removeEventListener("keyup",r)},t}function C(e){y.a.fire({title:e,timer:5e3,position:"top",showConfirmButton:!1,toast:!0,width:Math.floor(a.SCREEN_WIDTH/2)+"px",showClass:{popup:"animate__animated animate__slideInDown"},hideClass:{popup:"animate__animated animate__slideOutUp"}}).then()}var O,H=n(2),D=0,F=13391308,U=43775,j=16777215,G=3158064,k=9474192,B={INIT:"init",FLY:"fly",MANAGE:"manage"},W="saved-game-names",Y="game-",q=1e3,Q=1e3,X=q/2,V=Q/2,K=120,J=120,z=K/2,Z=J/2,$=4e3,ee=4e3,te=$/2,ne=ee/2,re=K/$,ae=J/ee,ie=k,oe=G,ue=k,le=F,se=U,ce=j,de="images/spritesheet.json",me="rock_planet.png",pe="red_planet.png",Ee="purple_planet.png",fe="green_planet.png",we="mine",_e="factory.png",Ie="ship_cargo.png",ye="ship_explorer.png",he="ship_fast.png",ve="ship_skeleton.png",Se="ship_fighter.png",Ae="ship_heavy.png",Te="ship_ball.png",Pe="images/stars.png",Me="images/crash.json",Ne="crash",ge="bullet.png",be="bullet_blue.png",xe="bullet_white.png",Re="shield_blue.png",Le="alien.png",Ce="alien_small.png",Oe="alien_large.png",He="alien_fire.png",De="alien_blue.png",Fe="alien_large_blue.png",Ue="ship_black.png",je=3e4,Ge=q,ke=2*je/Ge,Be="player",We="alien",Ye={titanium:30,gold:20,uranium:0},qe=2,Qe=2,Xe=10,Ve=99999999,Ke=-(je+1e3),Je=0,ze=1e3,Ze=50,$e=3,et=.05,tt="mine",nt=1,rt=52,at=.5,it=.0166,ot=.0083,ut=.0033,lt={titanium:20,gold:10,uranium:0},st="factory",ct={titanium:50,gold:20,uranium:10},dt=91,mt=.8,pt="Brake",Et="Primary Weapon",ft="Secondary Weapon",wt="Thruster",_t="Armor",It="Repair Droid",yt="Gunnery Droid",ht="Speed",vt="Turn",St="Storage",At="Thrust Momentum",Tt="Thrust Blink",Pt="Equip",Mt="Ship",Nt="ALIEN_AI_TURRET",gt="ALIEN_AI_CREEPER",bt="EQUIP_AI_MINE",xt="EQUIP_AI_TURRET",Rt="EQUIP_AI_MISSILE",Lt="ahead",Ct="behind",Ot={name:"Brake",objType:Pt,type:pt,brakeSpeedPct:.04,cost:{titanium:20,gold:10,uranium:0}},Ht={name:"Blink Brake",objType:Pt,type:pt,brakeSpeedPct:0,cost:{titanium:50,gold:50,uranium:30}},Dt={name:"Speed Booster",objType:Pt,type:ht,boostSpeed:.05,cost:{titanium:0,gold:10,uranium:20}},Ft={name:"Turn Booster",objType:Pt,type:vt,boostSpeed:.05,cost:{titanium:0,gold:10,uranium:20}},Ut={name:"Storage",objType:Pt,type:St,storageAmount:100,cost:{titanium:50,gold:0,uranium:0}},jt={name:"Blaster",objType:Pt,type:Et,coolTime:25,cool:0,damage:10,speed:2.5,lifetime:100,bulletFile:ge,cost:{titanium:10,gold:0,uranium:20}},Gt={name:"Fast Blaster",objType:Pt,type:Et,coolTime:10,cool:0,damage:10,speed:4,lifetime:80,bulletFile:ge,cost:{titanium:20,gold:20,uranium:40}},kt={name:"Sprinkler Blaster",objType:Pt,type:Et,coolTime:2,cool:2,damage:6,speed:2.5,lifetime:150,jitter:1,bulletFile:ge,cost:{titanium:20,gold:10,uranium:80}},Bt={name:"Stream Blaster",objType:Pt,type:Et,coolTime:3,cool:0,damage:7,speed:7,lifetime:70,bulletFile:ge,cost:{titanium:30,gold:30,uranium:60}},Wt={name:"Thruster",objType:Pt,type:wt,thrustSpeed:.08,thrustType:At,cost:{titanium:40,gold:40,uranium:10}},Yt={name:"Blink Thruster",objType:Pt,type:wt,thrustSpeed:2.5,thrustType:Tt,cost:{titanium:60,gold:50,uranium:10}},qt={name:"R2D2 Repair Droid",objType:Pt,type:It,repairSpeed:.03,cost:{titanium:20,gold:100,uranium:50}},Qt={name:"Gunnery Droid",objType:Pt,type:yt,weapon:Gt,cost:{titanium:100,gold:200,uranium:300}},Xt={name:"Alien Blaster",objType:Pt,type:Et,coolTime:20,cool:0,damage:4,speed:2,lifetime:120,bulletFile:be,cost:{titanium:10,gold:30,uranium:50}},Vt={name:"Staple Gun",objType:Pt,type:Et,coolTime:3,cool:0,damage:1.5,speed:3,lifetime:300,bulletFile:xe,cost:{titanium:10,gold:30,uranium:50}},Kt={name:"Armor Plate",objType:Pt,type:_t,armorAmt:100,cost:{titanium:50,gold:0,uranium:0}},Jt={name:"Force Shield",objType:Pt,type:ft,cool:0,coolTime:600,shield:{active:!1,armor:500,armorMax:500,lifetime:240,lifetimeMax:240,spriteFile:Re,radius:0},cost:{titanium:0,gold:0,uranium:100}},zt={name:"Explorer",objType:Mt,propulsion:.05,turnSpeed:.05,resourcesMax:50,resources:{titanium:0,gold:0,uranium:0},equipMax:2,equip:[Ot,jt],armorMax:50,armor:50,crashSpeed:2,crashAngle:.5,imageScale:.6,imageFile:ye,cost:{titanium:40,gold:30,uranium:30}},Zt={name:"Cargo",objType:Mt,propulsion:.027,turnSpeed:.04,resourcesMax:600,resources:{titanium:0,gold:0,uranium:0},equipMax:2,equip:[Ot],armorMax:20,armor:20,crashSpeed:1.2,crashAngle:.3,imageScale:1,imageFile:Ie,cost:{titanium:100,gold:50,uranium:50}},$t={name:"Fast",objType:Mt,propulsion:.1,turnSpeed:.08,resourcesMax:40,resources:{titanium:0,gold:0,uranium:0},equipMax:3,equip:[Ot],armorMax:50,armor:50,crashSpeed:2,crashAngle:.5,imageScale:1,imageFile:he,cost:{titanium:200,gold:100,uranium:50}},en={name:"Skeleton",objType:Mt,propulsion:.03,turnSpeed:.045,resourcesMax:30,resources:{titanium:0,gold:0,uranium:0},equipMax:7,equip:[],armorMax:50,armor:50,crashSpeed:2,crashAngle:.5,imageScale:.8,imageFile:ve,cost:{titanium:150,gold:150,uranium:50}},tn={name:"Heavy",objType:Mt,propulsion:.05,turnSpeed:.05,resourcesMax:300,resources:{titanium:0,gold:0,uranium:0},equipMax:6,equip:[Ot],armorMax:300,armor:300,crashSpeed:1.5,crashAngle:.4,imageScale:.4,imageFile:Ae,cost:{titanium:500,gold:300,uranium:150}},nn={name:"Fighter",objType:Mt,propulsion:.08,turnSpeed:.07,resourcesMax:120,resources:{titanium:0,gold:0,uranium:0},equipMax:6,equip:[Ot],armorMax:200,armor:200,crashSpeed:1.5,crashAngle:.6,imageScale:.5,imageFile:Se,cost:{titanium:500,gold:500,uranium:500}},rn={name:"Alien Turret",objType:Mt,propulsion:.05,turnSpeed:.05,resourcesMax:100,resources:{titanium:0,gold:0,uranium:0},equipMax:3,equip:[Ot,Xt],armorMax:100,armor:100,crashSpeed:2,crashAngle:10,imageScale:.8,imageFile:Ce,cost:{titanium:50,gold:50,uranium:50},aiType:Nt},an={name:"Alien Ship",objType:Mt,propulsion:.05,turnSpeed:.05,resourcesMax:100,resources:{titanium:0,gold:0,uranium:0},equipMax:3,equip:[Ot,Xt],armorMax:100,armor:100,crashSpeed:2,crashAngle:10,imageScale:.9,imageFile:Le,cost:{titanium:150,gold:100,uranium:80},aiType:gt},on={name:"Alien Large",objType:Mt,propulsion:.03,turnSpeed:.05,resourcesMax:100,resources:{titanium:0,gold:0,uranium:0},equipMax:3,equip:[Ot,Xt],armorMax:300,armor:300,crashSpeed:2,crashAngle:10,imageScale:1,imageFile:Oe,cost:{titanium:150,gold:100,uranium:80},aiType:gt},un={name:"Alien Fire",objType:Mt,propulsion:.08,turnSpeed:.05,resourcesMax:100,resources:{titanium:0,gold:0,uranium:0},equipMax:3,equip:[Ot,Vt],armorMax:250,armor:250,crashSpeed:2,crashAngle:10,imageScale:1.5,imageFile:He,cost:{titanium:250,gold:200,uranium:80},aiType:gt},ln={name:"Alien Stealth",objType:Mt,propulsion:.04,turnSpeed:.05,resourcesMax:100,resources:{titanium:0,gold:0,uranium:0},equipMax:3,equip:[Ot,Xt],armorMax:150,armor:150,crashSpeed:2,crashAngle:10,imageScale:1.5,imageFile:Ue,cost:{titanium:100,gold:200,uranium:150},aiType:gt},sn={name:"Mine",objType:Mt,propulsion:0,turnSpeed:0,resourcesMax:0,resources:{titanium:0,gold:0,uranium:0},equipMax:0,equip:[],armorMax:100,armor:100,crashSpeed:2,crashAngle:10,imageScale:1.2,imageFile:De,cost:{titanium:5,gold:0,uranium:10},aiType:bt,aiData:{mineDistance:300}},cn={name:"Turret",objType:Mt,propulsion:0,turnSpeed:0,resourcesMax:0,resources:{titanium:0,gold:0,uranium:0},equipMax:0,equip:[Gt],armorMax:100,armor:100,crashSpeed:2,crashAngle:10,imageScale:.6,imageFile:Fe,cost:{titanium:10,gold:10,uranium:20},aiType:xt,aiData:{mineDistance:300}},dn={name:"Missile",objType:Mt,propulsion:.1,turnSpeed:.1,resourcesMax:0,resources:{titanium:0,gold:0,uranium:0},equipMax:0,equip:[],armorMax:200,armor:200,crashSpeed:2,crashAngle:10,imageScale:1,imageFile:Te,cost:{titanium:5,gold:5,uranium:10},aiType:Rt},mn=[zt,Zt,$t,tn,nn,an,rn,on,un,ln],pn={name:"Mine Deployer",objType:Pt,type:ft,coolTime:25,cool:0,createShip:{type:sn,dir:Ct},cost:{titanium:30,gold:50,uranium:100}},En={name:"Turret Deployer",objType:Pt,type:ft,coolTime:100,cool:0,createShip:{type:cn,dir:Ct},cost:{titanium:100,gold:100,uranium:200}},fn={name:"Missile Launcher",objType:Pt,type:ft,coolTime:50,cool:0,createShip:{type:dn,dir:Lt},cost:{titanium:50,gold:50,uranium:100}},wn=[Ot,Ht],_n=[Wt,Yt],In=[Kt,Dt,Ft,Ut],yn=[jt,Gt,Bt,kt,Xt,Vt],hn=[pn,En,fn,Jt],vn=[qt,Qt],Sn=[].concat(wn,_n,In,yn,hn,vn),An=(O={},Object(H.a)(O,me,[{xp:1,obj:zt},{xp:50,obj:Ot},{xp:80,obj:jt},{xp:100,obj:Zt},{xp:200,obj:Kt},{xp:500,obj:Dt}]),Object(H.a)(O,pe,[{xp:10,obj:Ut},{xp:50,obj:Wt},{xp:100,obj:$t}]),Object(H.a)(O,fe,[{xp:10,obj:en},{xp:50,obj:qt},{xp:100,obj:Yt},{xp:1e3,obj:tn}]),Object(H.a)(O,Ee,[{xp:10,obj:Ft},{xp:500,obj:Qt},{xp:1e3,obj:nn}]),Object(H.a)(O,rn.name,[{xp:1,obj:Gt},{xp:5,obj:Ht},{xp:10,obj:Xt}]),Object(H.a)(O,an.name,[{xp:1,obj:pn},{xp:5,obj:Bt},{xp:10,obj:an}]),Object(H.a)(O,on.name,[{xp:1,obj:Jt},{xp:5,obj:En},{xp:10,obj:on}]),Object(H.a)(O,ln.name,[{xp:1,obj:kt},{xp:5,obj:fn}]),Object(H.a)(O,un.name,[{xp:1,obj:Vt},{xp:10,obj:un}]),O),Tn=new Map;Tn.set(fe,.01),Tn.set(Ee,.015),Tn.set(pe,.02),Tn.set(me,.025);var Pn=[{planetCount:1,minDist:1,maxDist:2,minDistToOtherPlanet:10,minPlanetRadius:1500,maxPlanetRadius:1501,planetFiles:[Ee],aliens:[{count:0,file:null}]},{planetCount:0,minDist:1600,maxDist:2500,minDistToOtherPlanet:200,minPlanetRadius:200,maxPlanetRadius:200,planetFiles:[],aliens:[{count:50,file:ln},{count:50,file:un}]},{planetCount:200,minDist:2500,maxDist:1e4,minDistToOtherPlanet:150,minPlanetRadius:250,maxPlanetRadius:500,planetFiles:[pe,Ee,fe],aliens:[{count:200,file:rn},{count:200,file:an},{count:700,file:on},{count:300,file:ln}]},{planetCount:600,minDist:1e4,maxDist:15e3,minDistToOtherPlanet:150,minPlanetRadius:150,maxPlanetRadius:250,planetFiles:[me,pe,fe],aliens:[{count:1e3,file:rn},{count:1e3,file:an},{count:300,file:on}]},{planetCount:1800,minDist:15e3,maxDist:25e3,minDistToOtherPlanet:200,minPlanetRadius:100,maxPlanetRadius:200,planetFiles:[me,pe],aliens:[{count:1500,file:rn},{count:100,file:an}]},{planetCount:1e3,minDist:25e3,maxDist:je,minDistToOtherPlanet:500,minPlanetRadius:30,maxPlanetRadius:100,planetFiles:[me],aliens:[]}],Mn=n(8),Nn=n(1),gn=n(7),bn=n.n(gn);function xn(){var e;return{saveGameName:null,ship:null,view:{x:0,y:0},aliens:[],planets:[],selectedPlanet:{resources:{}},lastPlanetLanded:null,blueprints:{ship:[],equip:[],xp:(e={},Object(H.a)(e,a.ROCK_PLANET_FILE,0),Object(H.a)(e,a.RED_PLANET_FILE,0),Object(H.a)(e,a.GREEN_PLANET_FILE,0),Object(H.a)(e,a.PURPLE_PLANET_FILE,0),Object(H.a)(e,a.SHIP_ALIEN_TURRET.name,0),Object(H.a)(e,a.SHIP_ALIEN.name,0),Object(H.a)(e,a.SHIP_ALIEN_LARGE.name,0),Object(H.a)(e,a.SHIP_ALIEN_STEALTH.name,0),Object(H.a)(e,a.SHIP_ALIEN_FIRE.name,0),e),xpLevels:bn.a.cloneDeep(a.XP_LEVELS)},nextId:100,system:{keys:{},app:null,gameState:a.GAME_STATE.INIT,isTyping:!1,gameLoop:null,bgSprite:null,explosionSheet:null,explosions:[],bullets:[],planetSpriteCache:{},shipSpriteCache:{},shieldSpriteCache:new Map,spriteContainers:{background:null,planets:null,bullets:null,ships:null,minimap:null},miniMapGraphics:null,initializing:!0}}}function Rn(){var e=window.world;Ln(),Cn(),On(),e.selectedPlanet=e.planets[0],window.world.shipStartX=a.PLAYER_START_X,window.world.shipStartY=a.PLAYER_START_Y,e.ship=Wn(a.SHIP_EXPLORER,a.PLAYER),Gn(e.ship).visible=!0,e.ship.resources=a.PLAYER_STARTING_RESOURCES,qn(),Qn(),nr(),ar()}function Ln(){var e=window.world.system.app.stage,t=window.world.system.spriteContainers;t.background=new window.PIXI.Container,e.addChild(t.background),t.planets=new window.PIXI.Container,e.addChild(t.planets),t.bullets=new window.PIXI.Container,e.addChild(t.bullets),t.ships=new window.PIXI.Container,e.addChild(t.ships),t.minimap=new window.PIXI.Container,e.addChild(t.minimap)}function Cn(){var e=window.world.system.spriteContainers.background;window.world.system.bgSprite=new window.PIXI.TilingSprite(window.PIXI.Texture.from(a.STAR_BACKGROUND_FILE),a.SCREEN_WIDTH,a.SCREEN_HEIGHT),e.addChild(window.world.system.bgSprite)}function On(){window.world.system.spriteContainers.planets;var e,t=Object(Nn.a)(a.UNIVERSE_RINGS);try{for(t.s();!(e=t.n()).done;)for(var n=e.value,i=0;i<n.planetCount;i++){var o=n.planetFiles[r.randomInt(0,n.planetFiles.length-1)],u=String.fromCharCode(65+Math.floor(26*Math.random()))+r.randomInt(1e3,999999),l=r.randomInt(n.minPlanetRadius,n.maxPlanetRadius),s=l*l*a.PLANET_DENSITY.get(o),c=2*s*.3,d=.1*s,m=Un(o,u,l,s,{titanium:r.randomInt(d,c),gold:r.randomInt(d,c),uranium:r.randomInt(d,c)}),p=Fn(m,n.minDistToOtherPlanet,0,n.minDist,n.maxDist),E=p.x,f=p.y;m.x=E,m.y=f}}catch(w){t.e(w)}finally{t.f()}}function Hn(e,t,n){var a,i=99999999999,o=null,u=Object(Nn.a)(window.world.planets);try{for(u.s();!(a=u.n()).done;){var l=a.value;if(l!==e){var s=r.distanceBetween(t,n,l.x,l.y)-l.radius;e&&(s-=e.radius),(!o||s<i)&&(i=s,o=l)}}}catch(c){u.e(c)}finally{u.f()}return{nearestPlanet:o,nearestPlanetDist:i}}function Dn(e,t){var n,a=99999999999,i=null,o=Object(Nn.a)(window.world.aliens);try{for(o.s();!(n=o.n()).done;){var u=n.value,l=r.distanceBetween(e,t,u.x,u.y)-2*u.radius;(!i||l<a)&&(a=l,i=u)}}catch(s){o.e(s)}finally{o.f()}return{nearestAlien:i,nearestAlienDist:a}}function Fn(e,t,n,a,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=r.randomFloat(0,2*Math.PI),l=r.randomInt(a,i),s=r.getPointFrom(0,0,u,l),c=s.x,d=s.y,m=9999;if(t>0){var p=Hn(e,c,d),E=p.nearestPlanetDist;if(E<t)return Fn(e,t,n,a,i,++o);m=E}if(n>0){var f=Dn(c,d),w=f.nearestAlienDist;if(w<n)return Fn(e,t,n,a,i,++o)}return o>200&&console.warn("Had a hard time finding a spot, it took "+o+" tries on ring "+a+" np="+m),{x:c,y:d}}function Un(e,t,n,r,a){var i={};return i.name=t,i.x=0,i.y=0,i.mass=r,i.resources={stored:{titanium:0,gold:0,uranium:0},raw:a},i.ships=[],i.equip=[],i.buildings=[],i.radius=n,i.lastLandingDir=0,i.spriteFile=e,i.spriteId=null,window.world.planets.push(i),i}function jn(e){var t=window.world.system.planetSpriteCache[e.spriteFile];t||(t=new Map,window.world.system.planetSpriteCache[e.spriteFile]=t);var n=t.get(e.spriteId);if(n)return n;(n=new window.PIXI.Container).x=0,n.y=0,n.visible=!0,window.world.system.spriteContainers.planets.addChild(n);var r=new window.PIXI.Sprite(window.PIXI.loader.resources[a.SPRITESHEET_JSON].textures[e.spriteFile]);r.anchor.set(.5,.5);var i=2*e.radius/r.width;e.spriteFile!==a.PURPLE_PLANET_FILE&&e.spriteFile!==a.GREEN_PLANET_FILE||(i*=1.08),r.scale.set(i,i),n.addChild(r);var o,u=Object(Nn.a)(e.buildings);try{for(u.s();!(o=u.n()).done;){var s=o.value;l.makeBuildingSprite(s,e,n)}}catch(c){u.e(c)}finally{u.f()}return e.spriteId=window.world.nextId++,t.set(e.spriteId,n),n}function Gn(e){var t=window.world.system.shipSpriteCache[e.imageFile];t||(t=new Map,window.world.system.shipSpriteCache[e.imageFile]=t);var n=t.get(e.spriteId);if(n)return n;var r,i=Object(Nn.a)(t.entries());try{for(i.s();!(r=i.n()).done;){var o=Object(Mn.a)(r.value,2),u=o[0],l=o[1];if(!l.visible)return l.visible=!1,l.rotation=e.rotation,e.spriteWidth=l.width,e.spriteHeight=l.height,e.radius=l.width/2,e.spriteId=u,l}}catch(c){i.e(c)}finally{i.f()}var s=window.PIXI.loader.resources[a.SPRITESHEET_JSON];return(n=new window.PIXI.Sprite(s.textures[e.imageFile])).position.set(a.HALF_SCREEN_WIDTH,a.HALF_SCREEN_HEIGHT),n.anchor.set(.5,.5),n.scale.set(e.imageScale,e.imageScale),n.rotation=e.rotation,n.visible=!1,e.spriteWidth=n.width,e.spriteHeight=n.height,e.radius=n.width/2,e.spriteId=window.world.nextId++,t.set(e.spriteId,n),window.world.system.spriteContainers.ships.addChild(n),n}function kn(e){var t=e.width,n=e.height;e.scale.set(1,1);var r=e.width,a=e.height;return e.width=t,e.height=n,{width:r,height:a}}function Bn(e,t){var n=e.id+"~"+t.spriteFile,r=window.world.system.shieldSpriteCache.get(n);if(r)return r;var i=Gn(e),o=window.PIXI.loader.resources[a.SPRITESHEET_JSON];(r=new window.PIXI.Sprite(o.textures[t.spriteFile])).anchor.set(.5,.5);var u=kn(i),l=u.width,s=u.height,c=1.5*Math.max(l,s);return r.width=c,r.height=c,t.radius=c*e.imageScale/2,i.addChild(r),window.world.system.shieldSpriteCache.set(n,r),r}function Wn(e,t){var n=bn.a.cloneDeep(e);n.id=window.world.nextId++;var r,a=Object(Nn.a)(n.equip);try{for(a.s();!(r=a.n()).done;){r.value.id=window.world.nextId++}}catch(i){a.e(i)}finally{a.f()}return n.owner=t,n.vx=0,n.vy=0,n.x=window.world.shipStartX,n.y=window.world.shipStartY,n.spriteId=null,n.alive=!0,n.spriteWidth=null,n.rotation=0,n}function Yn(e,t,n){var r=Wn(e,a.ALIEN);return window.world.aliens.push(r),r.x=t,r.y=n,r.radius=50,r}function qn(){var e,t=Object(Nn.a)(a.UNIVERSE_RINGS);try{for(t.s();!(e=t.n()).done;){var n,r=e.value,i=Object(Nn.a)(r.aliens);try{for(i.s();!(n=i.n()).done;)for(var o=n.value,u=0;u<o.count;u++){var l=Fn(null,a.MIN_ALIEN_DIST_TO_PLANET,a.MIN_ALIEN_DIST_TO_ALIEN,r.minDist,r.maxDist),s=l.x,c=l.y;Yn(o.file,s,c)}}catch(d){i.e(d)}finally{i.f()}}}catch(d){t.e(d)}finally{t.f()}}function Qn(){var e=window.world.system.spriteContainers.minimap,t=new window.PIXI.Container;e.addChild(t);var n=new window.PIXI.Graphics;n.drawRect(0,a.SCREEN_HEIGHT-a.MINIMAP_HEIGHT,a.MINIMAP_WIDTH,a.SCREEN_HEIGHT),n.renderable=!0,n.cacheAsBitmap=!0,t.addChild(n),t.mask=n;var r=new window.PIXI.Graphics;t.addChild(r),window.world.system.miniMapGraphics=r}function Xn(e){var t=e.data.global.x,n=e.data.global.y;t<a.MINIMAP_WIDTH&&n>a.SCREEN_HEIGHT-a.MINIMAP_HEIGHT&&u.clickOnMinimap(t,n)}function Vn(e){var t=window.world;t.system.gameState=e,e===a.GAME_STATE.FLY?(u.enterFlyState(),t.system.gameLoop=u.flyLoop):e===a.GAME_STATE.MANAGE?(l.enterManageState(),t.system.gameLoop=l.manageLoop):t.system.gameLoop=null}function Kn(){var e,t=window.world,n=Object(Nn.a)(t.planets);try{for(n.s();!(e=n.n()).done;){var r,i=e.value,o=Object(Nn.a)(i.buildings);try{for(o.s();!(r=o.n()).done;){r.value.type===a.BUILDING_TYPE_MINE&&(Jn(i,"titanium",a.MINE_SPEED_TITANIUM),Jn(i,"gold",a.MINE_SPEED_GOLD),Jn(i,"uranium",a.MINE_SPEED_URANIUM))}}catch(d){o.e(d)}finally{o.f()}if(0===i.resources.raw.titanium&&0===i.resources.raw.gold&&0===i.resources.raw.uranium){var u,l=jn(i),s=Object(Nn.a)(l.children);try{for(s.s();!(u=s.n()).done;){var c=u.value;c.animationSpeed&&(c.animationSpeed=0)}}catch(d){s.e(d)}finally{s.f()}}}}catch(d){n.e(d)}finally{n.f()}}function Jn(e,t,n){e.resources.raw[t]>0&&(e.resources.raw[t]-=n,e.resources.stored[t]+=n,e.resources.raw[t]<=0&&(e.resources.raw[t]=0),function(e,t){var n=window.world.blueprints,r=n.xp[t.spriteFile]+=e,a=n.xpLevels[t.spriteFile][0];a&&a.xp<=r&&(Zn(a),n.xpLevels[t.spriteFile].shift())}(n,e))}function zn(e){var t=window.world.blueprints,n=t.xp[e.name]+=1,r=t.xpLevels[e.name][0];r&&r.xp<=n&&(Zn(r),t.xpLevels[e.name].shift())}function Zn(e){r.showToast("New plan: "+e.obj.name);var t=window.world.blueprints;e.obj.objType===a.OBJ_EQUIP?t.equip.push(e.obj):e.obj.objType===a.OBJ_SHIP?t.ship.push(e.obj):console.warn("Could not find blueprint of type "+e.obj.objType+" nextLevel=",e)}function $n(e,t,n){var r=0,a=0,i=0;return e&&(r+=e.resources.stored.titanium,a+=e.resources.stored.gold,i+=e.resources.stored.uranium),t&&(r+=t.resources.titanium,a+=t.resources.gold,i+=t.resources.uranium),r>=n.titanium&&a>=n.gold&&i>=n.uranium}function er(e,t,n){tr(e,t,"titanium",n.titanium),tr(e,t,"gold",n.gold),tr(e,t,"uranium",n.uranium)}function tr(e,t,n,r){var a=-r;if(e){if((a=e.resources.stored[n]-r)>=0)return void(e.resources.stored[n]-=r);e.resources.stored[n]=0}t?(t.resources[n]=t.resources[n]+a,t.resources[n]<0&&console.warn("Ship is in debt "+t.resources[n]+" "+n)):a<0&&(e.resources.stored[n]=e.resources.stored[n]+a,console.warn("Planet is in debt "+e.resources.stored[n]+" "+n))}function nr(){window.world.system.explosionSheet=window.PIXI.Loader.shared.resources[a.CRASH_JSON].spritesheet,window.world.system.explosions.push(rr())}function rr(){var e=new window.PIXI.AnimatedSprite(window.world.system.explosionSheet.animations[a.CRASH]);return e.animationSpeed=.4,e.loop=!1,e.anchor.set(.5,.5),e.scale.set(2,2),e.x=a.HALF_SCREEN_WIDTH,e.y=a.HALF_SCREEN_WIDTH,e.loop=!0,e.visible=!1,window.world.system.explosions.push(e),window.world.system.spriteContainers.bullets.addChild(e),e}function ar(){for(var e=new Array(a.PLANET_CACHE_NUM_STEPS),t=0;t<a.PLANET_CACHE_NUM_STEPS;t++){e[t]=new Array(a.PLANET_CACHE_NUM_STEPS);for(var n=0;n<a.PLANET_CACHE_NUM_STEPS;n++){var r,i=(t-1)*a.PLANET_CACHE_STEP_SIZE-a.UNIVERSE_RADIUS,o=(t+2)*a.PLANET_CACHE_STEP_SIZE-a.UNIVERSE_RADIUS,u=(n-1)*a.PLANET_CACHE_STEP_SIZE-a.UNIVERSE_RADIUS,l=(n+2)*a.PLANET_CACHE_STEP_SIZE-a.UNIVERSE_RADIUS,s=[],c=Object(Nn.a)(window.world.planets);try{for(c.s();!(r=c.n()).done;){var d=r.value;d.x-d.radius>=i&&d.x+d.radius<=o&&d.y-d.radius>=u&&d.y+d.radius<=l&&s.push(d)}}catch(m){c.e(m)}finally{c.f()}e[t][n]={planets:s}}}window.world.system.planetCache=e}function ir(e,t){var n=Math.floor((e+a.UNIVERSE_RADIUS)/a.PLANET_CACHE_STEP_SIZE),r=Math.floor((t+a.UNIVERSE_RADIUS)/a.PLANET_CACHE_STEP_SIZE);return n<0&&(n=0),n>=a.PLANET_CACHE_NUM_STEPS&&(n=a.PLANET_CACHE_NUM_STEPS-1),r<0&&(r=0),r>=a.PLANET_CACHE_NUM_STEPS&&(r=a.PLANET_CACHE_NUM_STEPS-1),window.world.system.planetCache[n][r].planets}function or(){var e,t=window.world.ship,n=Object(Nn.a)(window.world.aliens);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r.alive){var i=!1;if(r.aiType===a.ALIEN_AI_TURRET?lr(r):r.aiType===a.ALIEN_AI_CREEPER?i=dr(r):r.aiType===a.EQUIP_AI_TURRET?i=sr(r):r.aiType===a.EQUIP_AI_MISSILE&&(i=cr(r)),i&&(pr(r),Er(r)),t.x+a.HALF_SCREEN_WIDTH+r.radius>=r.x&&t.x-a.HALF_SCREEN_WIDTH-r.radius<=r.x&&t.y+a.HALF_SCREEN_HEIGHT+r.radius>=r.y&&t.y-a.HALF_SCREEN_HEIGHT-r.radius<=r.y){if(r.alive){var o=Gn(r);o.visible=!0,o.rotation=r.rotation,o.x=r.x-t.x+a.HALF_SCREEN_WIDTH,o.y=r.y-t.y+a.HALF_SCREEN_HEIGHT}}else if(r.spriteId)Gn(r).visible=!1,r.spriteId=null}}}catch(u){n.e(u)}finally{n.f()}}function ur(e,t,n,a){e.rotation=r.normalizeRadian(Math.atan2(n-e.y,t-e.x)),u.firePrimaryWeapon(e,a)}function lr(e){var t=window.world.ship;t.alive&&r.distanceBetween(e.x,e.y,t.x,t.y)<300&&ur(e,t.x,t.y,.7)}function sr(e){var t=mr(e.x,e.y),n=t.target,r=t.dist;return n&&r<=u.primaryWeaponRange(e)&&ur(e,n.x,n.y,.25),!1}function cr(e){var t=mr(e.x,e.y),n=t.target,i=t.dist;if(n&&i<a.SCREEN_WIDTH){var o=r.directionTo(e.x,e.y,n.x,n.y),u=r.dirComponents(o,e.propulsion),l=u.xAmt,s=u.yAmt;return e.vx+=l,e.vy+=s,e.x+=e.vx,e.y+=e.vy,!0}return!1}function dr(e){var t=window.world.ship;if(t.alive){var n=!1,o=r.distanceBetween(e.x,e.y,t.x,t.y);if(o<a.SCREEN_WIDTH){var u,l=r.directionTo(e.x,e.y,t.x,t.y),s=r.dirComponents(l,25*e.propulsion),c=s.xAmt,d=s.yAmt,m=Object(Nn.a)(i.getPlanetsNear(e.x,e.y));try{for(m.s();!(u=m.n()).done;){var p=u.value;if(r.distanceBetween(e.x+c,e.y+d,p.x,p.y)<p.radius+e.radius+10){var E=r.directionTo(e.x,e.y,p.x,p.y),f=E-l,w=f>=0?-1:1;Math.abs(f)>Math.PI&&(w*=-1);var _=E+w*Math.PI/2,I=r.dirComponents(_,20*e.propulsion);c=I.xAmt,d=I.yAmt}}}catch(y){m.e(y)}finally{m.f()}o<t.spriteWidth+e.radius+20&&(c=0,d=0),e.x+=c,e.y+=d,e.rotation=l,n=!0}return r.distanceBetween(e.x,e.y,t.x,t.y)<300&&ur(e,t.x,t.y,.15),n}}function mr(e,t){var n,i=null,o=null,u=Object(Nn.a)(window.world.aliens);try{for(u.s();!(n=u.n()).done;){var l=n.value;if(l.alive&&l.owner===a.ALIEN){var s=r.distanceBetween(e,t,l.x,l.y);(!i||s<o)&&(i=l,o=s)}}}catch(c){u.e(c)}finally{u.f()}return{target:i,dist:o}}function pr(e){var t,n=Object(Nn.a)(window.world.planets);try{for(n.s();!(t=n.n()).done;){var a=t.value;r.distanceBetween(e.x,e.y,a.x,a.y)<=e.radius+a.radius&&u.destroyShip(e,null)}}catch(i){n.e(i)}finally{n.f()}}function Er(e){var t,n=Object(Nn.a)(window.world.aliens);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a.alive&&e!==a)r.distanceBetween(e.x,e.y,a.x,a.y)<=e.radius+a.radius&&u.shipsCollide(e,a)}}catch(i){n.e(i)}finally{n.f()}}function fr(){console.log("Take off")}function wr(e){var t=window.world,n=window.world.ship;if(n.alive){vr(n),(t.system.keys.left.isDown||t.system.keys.a.isDown)&&Lr(n,!0),(t.system.keys.right.isDown||t.system.keys.d.isDown)&&Lr(n,!1),(t.system.keys.up.isDown||t.system.keys.w.isDown)&&function(e){var t=e.propulsion,n=Qr(e,a.EQUIP_TYPE_TURN);n&&(t+=n.boostSpeed);e.vx+=t*Math.cos(e.rotation),e.vy+=t*Math.sin(e.rotation)}(n),(t.system.keys.down.isDown||t.system.keys.s.isDown)&&function(e){var t=Qr(e,a.EQUIP_TYPE_BRAKE);t&&(t.brakeSpeedPct>0?(e.vx-=e.vx*t.brakeSpeedPct,e.vy-=e.vy*t.brakeSpeedPct):(e.vx=0,e.vy=0))}(n),t.system.keys.space.isDown&&Hr(n,.05),t.system.keys.x.isDown&&Dr(n),t.system.keys.q.isDown&&Cr(n,!0),t.system.keys.e.isDown&&Cr(n,!1);var i,o=[],u=Object(Nn.a)(t.planets);try{for(u.s();!(i=u.n()).done;){var l=i.value;Tr(n,l)&&o.push(l)}}catch(h){u.e(h)}finally{u.f()}for(var s=0,c=o;s<c.length;s++){var d=c[s],m=r.calcGravity(n.x,n.y,d);n.vx+=m.x,n.vy+=m.y}n.x+=n.vx,n.y+=n.vy,t.view.x=n.x,t.view.y=n.y;var p=Gn(n);if(p.rotation=n.rotation,!t.system.initializing){var E,f=Object(Nn.a)(o);try{for(f.s();!(E=f.n()).done;){var w=E.value;if(Mr(n,p,w))return void gr(n,w)}}catch(h){f.e(h)}finally{f.f()}var _,I=Object(Nn.a)(t.aliens);try{for(I.s();!(_=I.n()).done;){var y=_.value;y.alive&&Nr(n,p,y)&&qr(n,y)}}catch(h){I.e(h)}finally{I.f()}}}!function(){var e,t=window.world.ship,n=Object(Nn.a)(window.world.system.explosions);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.x=r.globalX-t.x+a.HALF_SCREEN_WIDTH,r.y=r.globalY-t.y+a.HALF_SCREEN_HEIGHT}}catch(h){n.e(h)}finally{n.f()}}(),Ar(n),Xr(),t.system.initializing&&(t.system.initializing=!1)}function _r(){var e,t=Object(Nn.a)(window.world.planets);try{for(t.s();!(e=t.n()).done;){var n=e.value;Tr(window.world.ship,n)}}catch(r){t.e(r)}finally{t.f()}o.moveAliens(),Xr()}function Ir(){yr(window.world.ship);var e,t=Object(Nn.a)(window.world.aliens);try{for(t.s();!(e=t.n()).done;){yr(e.value)}}catch(n){t.e(n)}finally{t.f()}}function yr(e){var t,n=Object(Nn.a)(e.equip);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.cool&&(r.cool-=1),r.weapon&&r.weapon.cool&&(r.weapon.cool-=1),r.shield&&r.shield.active&&(r.shield.lifetime-=1,r.shield.lifetime<=0&&(r.shield.lifetime=0,Ur(e,r.shield)))}}catch(a){n.e(a)}finally{n.f()}}function hr(e){var t,n=Object(Nn.a)(e.equip);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.type===a.EQUIP_TYPE_PRIMARY_WEAPON&&r.cool>0&&(r.cool=0)}}catch(i){n.e(i)}finally{n.f()}}function vr(e){var t,n=Object(Nn.a)(e.equip);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.type===a.EQUIP_TYPE_REPAIR_DROID&&e.armor<e.armorMax){var o={titanium:r.repairSpeed,gold:0,uranium:0};i.canAfford(null,e,o)&&(e.armor+=r.repairSpeed,i.payResourceCost(null,e,o))}else r.type===a.EQUIP_TYPE_GUNNERY_DROID&&Sr(e,r.weapon)}}catch(u){n.e(u)}finally{n.f()}}function Sr(e,t){if(!(t.cool>0)){var n,i=null,o=null,u=Object(Nn.a)(window.world.aliens);try{for(u.s();!(n=u.n()).done;){var l=n.value;if(l.alive&&l.owner===a.ALIEN){var s=r.distanceBetween(e.x,e.y,l.x,l.y);(!i||s<o)&&(i=l,o=s)}}}catch(d){u.e(d)}finally{u.f()}if(i&&o<=Jr(t)){var c=e.rotation;e.rotation=r.normalizeRadian(Math.atan2(i.y-e.y,i.x-e.x)),Or(t,e,.1),e.rotation=c}}}function Ar(e){var t=window.world.system.bgSprite;t.tilePosition.x=100-e.x+a.HALF_SCREEN_WIDTH,t.tilePosition.y=100-e.y+a.HALF_SCREEN_HEIGHT}function Tr(e,t){if(e.x+a.HALF_SCREEN_WIDTH+t.radius<t.x||e.x-a.HALF_SCREEN_WIDTH-t.radius>t.x||e.y+a.HALF_SCREEN_HEIGHT+t.radius<t.y||e.y-a.HALF_SCREEN_HEIGHT-t.radius>t.y){if(t.spriteId){var n=jn(t);n.visible&&(n.visible=!1)}return!1}var r=jn(t);return r.visible=!0,r.x=t.x-e.x+a.HALF_SCREEN_WIDTH,r.y=t.y-e.y+a.HALF_SCREEN_HEIGHT,!0}function Pr(e){var t,n=Object(Nn.a)(e.equip);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.shield&&r.shield.active)return r.shield}}catch(a){n.e(a)}finally{n.f()}return null}function Mr(e,t,n){var i=Pr(e);if(i)return r.distanceBetween(e.x,e.y,n.x,n.y)<n.radius+i.radius;var o,u=r.getVertexData(e.x,e.y,t),l=Object(Nn.a)(u);try{for(l.s();!(o=l.n()).done;){var s=o.value;if(r.distanceBetween(s[0],s[1],n.x,n.y)<n.radius-a.ALLOWED_OVERLAP)return!0}}catch(c){l.e(c)}finally{l.f()}return!1}function Nr(e,t,n){var i=Pr(e);if(i)return r.distanceBetween(e.x,e.y,n.x,n.y)<n.radius+i.radius;var o,u=r.getVertexData(e.x,e.y,t),l=Object(Nn.a)(u);try{for(l.s();!(o=l.n()).done;){var s=o.value;if(n.radius)if(r.distanceBetween(s[0],s[1],n.x,n.y)<n.radius-a.ALLOWED_OVERLAP)return!0}}catch(c){l.e(c)}finally{l.f()}return!1}function gr(e,t){var n=r.normalizeRadian(Math.atan2(e.y-t.y,e.x-t.x)),o=Math.abs(e.rotation-n),u=Math.abs(e.vx)+Math.abs(e.vy),l=(o<e.crashAngle||o>2*Math.PI-e.crashAngle)&&u<e.crashSpeed;if(e.vx=0,e.vy=0,!l){var s=Math.max(u-e.crashSpeed,0),c=Math.max(o-e.crashAngle,0);c>Math.PI&&(c=2*Math.PI-o-e.crashAngle),Yr(e,(s/3+c)*e.armorMax,Rr)}var d=Pr(e);if(d&&Ur(e,d),e.armor>0){window.world.selectedPlanet=t,window.world.lastPlanetLanded=t;var m=r.directionTo(t.x,t.y,e.x,e.y),p=t.radius+e.spriteWidth/2,E=r.dirComponents(m,p),f=E.xAmt,w=E.yAmt;e.x=t.x+f,e.y=t.y+w,e.rotation=m,t.lastLandingDir=m,Gn(e).rotation=m,_r(),i.changeGameState(a.GAME_STATE.MANAGE)}}function br(e){var t,n=null,r=Object(Nn.a)(window.world.system.explosions);try{for(r.s();!(t=r.n()).done;){var o=t.value;if(!o.visible){n=o;break}}}catch(l){r.e(l)}finally{r.f()}n||(n=i.createExplosionSprite());var u=window.world.ship;return n.visible=!0,n.globalX=e.x,n.globalY=e.y,n.x=e.x-u.x+a.HALF_SCREEN_WIDTH,n.y=e.y-u.y+a.HALF_SCREEN_HEIGHT,n}function xr(e,t){e.owner===a.ALIEN&&i.addAlienXp(e);var n=br(e);Gn(e).visible=!1,e.alive=!1,e.spriteId=null,n.play(),n.onLoop=function(){n.stop(),n.visible=!1,t&&t()}}function Rr(){var e=window.world.ship,t=window.world.selectedPlanet;if(e.resourcesMax=0,e.resources={titanium:0,gold:0,uranium:0},e.equip=[],e.armorMax=0,e.armor=0,!t||0===t.buildings.length){var n,r=Object(Nn.a)(window.world.planets);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(o.buildings.length>0){window.world.selectedPlanet=o;break}}}catch(m){r.e(m)}finally{r.f()}t||(window.world.selectedPlanet=window.world.planets[0])}var u=l.getAvailablePlanetXY(t,e,t.lastLandingDir,20,0),s=u.x,c=u.y,d=u.rotation;e.x=s,e.y=c,e.vx=0,e.vy=0,e.rotation=d,wr(),i.changeGameState(a.GAME_STATE.MANAGE)}function Lr(e,t){var n=e.turnSpeed,i=Qr(e,a.EQUIP_TYPE_TURN);i&&(n+=i.boostSpeed),e.rotation=r.normalizeRadian(e.rotation+n*(t?-1:1))}function Cr(e,t){var n=Qr(e,a.EQUIP_TYPE_THRUSTER);if(n){var i=r.normalizeRadian(e.rotation+(t?-1:1)*Math.PI/2),o=n.thrustSpeed*Math.cos(i),u=n.thrustSpeed*Math.sin(i);n.thrustType===a.THRUST_MOMENTUM?(e.vx+=o,e.vy+=u):n.thrustType===a.THRUST_BLINK?(e.x+=o,e.y+=u):console.warn("Unable to use thruster with type "+n.thrustType)}}function Or(e,t,n){e&&e.cool<=0&&(jr(t,e,n),e.cool=e.coolTime)}function Hr(e,t){var n=Qr(e,a.EQUIP_TYPE_PRIMARY_WEAPON);n&&Or(n,e,n.jitter?n.jitter:t)}function Dr(e){var t=Qr(e,a.EQUIP_TYPE_SECONDARY_WEAPON);if(t&&t.cool<=0){if(t.createShip&&i.canAfford(null,e,t.createShip.type.cost)){i.payResourceCost(null,e,t.createShip.type.cost);var n=i.createShip(t.createShip.type,a.PLAYER),u=Gn(n),l=e.spriteWidth/2+n.spriteWidth/2+20,s=t.createShip.dir===Lt?r.normalizeRadian(e.rotation-Math.PI):e.rotation,c=r.dirComponents(s,l),d=c.xAmt,m=c.yAmt;n.x=e.x-d,n.y=e.y-m,n.propulsion&&(n.vx=e.vx,n.vy=e.vy),n.rotation=r.normalizeRadian(s-Math.PI),u.visible=!0,u.x=n.x-e.x+a.HALF_SCREEN_WIDTH,u.y=n.y-e.y+a.HALF_SCREEN_HEIGHT,window.world.aliens.push(n),o.checkForCollisionWithPlanet(n),o.checkForCollisionWithShip(n)}t.shield&&Fr(e,t.shield),t.cool=t.coolTime}}function Fr(e,t){i.getShieldSprite(e,t).visible=!0,t.active=!0,t.lifetime=t.lifetimeMax,t.armor=t.armorMax,e.spriteWidth=2*t.radius,e.spriteHeight=2*t.radius}function Ur(e,t){i.getShieldSprite(e,t).visible=!1,t.active=!1;var n=Gn(e);e.spriteWidth=n.width,e.spriteHeight=n.height}function jr(e,t,n){var i=function(e){var t,n=Object(Nn.a)(window.world.system.bullets);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!r.active&&r.fileName===e)return r.active=!0,r.sprite.visible=!0,r}}catch(l){n.e(l)}finally{n.f()}var i={active:!0,damage:0,x:0,y:0,vx:0,vy:0,lifetime:1,fileName:e},o=window.PIXI.loader.resources[a.SPRITESHEET_JSON],u=new window.PIXI.Sprite(o.textures[e]);return u.x=-100,u.y=-100,u.anchor.set(.5,.5),u.scale.set(.5,.5),window.world.system.spriteContainers.bullets.addChild(u),i.sprite=u,window.world.system.bullets.push(i),i}(t.bulletFile);i.lifetime=t.lifetime,i.damage=t.damage;var o=n?n*Math.random()*(r.randomBool()?-1:1):0,u=e.rotation+o;i.vx=e.vx+t.speed*Math.cos(u),i.vy=e.vy+t.speed*Math.sin(u),i.x=e.x+Math.sqrt(e.spriteWidth*e.spriteWidth+e.spriteHeight*e.spriteHeight)/2*Math.cos(u),i.y=e.y+Math.sqrt(e.spriteWidth*e.spriteWidth+e.spriteHeight*e.spriteHeight)/2*Math.sin(u)}function Gr(e){e.active=!1,e.sprite.visible=!1,e.sprite.x=-100,e.sprite.y=-100,e.vx=0,e.vy=0}function kr(){var e,t=window.world.ship,n=Object(Nn.a)(window.world.system.bullets);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.active&&(r.x=r.x+r.vx,r.y=r.y+r.vy,r.sprite.x=r.x-t.x+a.HALF_SCREEN_WIDTH,r.sprite.y=r.y-t.y+a.HALF_SCREEN_HEIGHT,r.lifetime=r.lifetime-1,r.lifetime<=0&&Gr(r),Br(r))}}catch(i){n.e(i)}finally{n.f()}}function Br(e){var t,n=window.world.ship,a=Object(Nn.a)(window.world.planets);try{for(a.s();!(t=a.n()).done;){var i=t.value;r.distanceBetween(i.x,i.y,e.x,e.y)<i.radius&&Gr(e)}}catch(d){a.e(d)}finally{a.f()}if(n.alive){var o=Pr(n);if(o&&r.distanceBetween(n.x,n.y,e.x,e.y)<o.radius)Wr(e,n,Rr);else Gn(n).containsPoint({x:e.sprite.x,y:e.sprite.y})&&Wr(e,n,Rr)}var u,l=Object(Nn.a)(window.world.aliens);try{for(l.s();!(u=l.n()).done;){var s=u.value;if(s.alive&&s.radius){var c=Pr(s);(c&&r.distanceBetween(s.x,s.y,e.x,e.y)<c.radius||r.distanceBetween(s.x,s.y,e.x,e.y)<=s.radius)&&Wr(e,s,null)}}}catch(d){l.e(d)}finally{l.f()}}function Wr(e,t,n){Yr(t,e.damage,n),Gr(e)}function Yr(e,t,n){var r=Pr(e);r?(r.armor-=t,r.armor<=0&&(r.armor=0,Ur(e,r))):(e.armor=e.armor-t,e.armor<=0&&(e.armor=0,xr(e,n)))}function qr(e,t){var n=e.armor,r=t.armor;Yr(t,n,null),Yr(e,r,window.world.ship===e?Rr:null),e.alive||(e.vx=0,e.vy=0)}function Qr(e,t){var n,r=Object(Nn.a)(e.equip);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.type===t)return a}}catch(i){r.e(i)}finally{r.f()}return null}function Xr(){var e=window.world.system.miniMapGraphics,t=window.world.view,n=a.SCREEN_HEIGHT-a.MINIMAP_HEIGHT,r=a.MINIMAP_WIDTH,i=a.SCREEN_HEIGHT;e.clear(),e.beginFill(a.MINIMAP_BACKGROUND_COLOR),e.lineStyle(1,a.MINIMAP_BORDER_COLOR),e.drawRect(0,n,r,i),e.endFill();var o,u=Object(Nn.a)(window.world.planets);try{for(u.s();!(o=u.n()).done;){var l=o.value;if(Kr(t,l)){var s=0+a.HALF_MINIMAP_WIDTH+(l.x-t.x)*a.MINIMAP_SCALE_X,c=n+a.HALF_MINIMAP_HEIGHT+(l.y-t.y)*a.MINIMAP_SCALE_Y,d=window.world.selectedPlanet===l?a.MINIMAP_SELECTED_PLANET_COLOR:a.MINIMAP_PLANET_COLOR;e.lineStyle(2,d),e.drawCircle(s,c,l.radius*a.MINIMAP_SCALE_X);var m,p=Object(Nn.a)(l.buildings);try{for(p.s();!(m=p.n()).done;){var E=m.value,f=0+a.HALF_MINIMAP_WIDTH+(E.x-t.x)*a.MINIMAP_SCALE_X-1.5,w=n+a.HALF_MINIMAP_HEIGHT+(E.y-t.y)*a.MINIMAP_SCALE_Y-1.5;e.lineStyle(1,a.MINIMAP_BUILDING_COLOR),e.drawRect(f,w,2,2)}}catch(y){p.e(y)}finally{p.f()}}}}catch(y){u.e(y)}finally{u.f()}e.lineStyle(1,a.MINIMAP_SHIP_COLOR);var _=0+a.HALF_MINIMAP_WIDTH+(window.world.ship.x-t.x)*a.MINIMAP_SCALE_X,I=n+a.HALF_MINIMAP_HEIGHT+(window.world.ship.y-t.y)*a.MINIMAP_SCALE_Y;e.drawCircle(_,I,2)}function Vr(e,t){if(window.world.system.gameState===a.GAME_STATE.MANAGE){var n,i=window.world.view,o=i.x+(e-a.HALF_MINIMAP_WIDTH)*(1/a.MINIMAP_SCALE_X),u=i.y+(t-(a.SCREEN_HEIGHT-a.MINIMAP_HEIGHT)-a.HALF_MINIMAP_HEIGHT)*(1/a.MINIMAP_SCALE_X),l=Object(Nn.a)(window.world.planets);try{for(l.s();!(n=l.n()).done;){var s=n.value;r.distanceBetween(o,u,s.x,s.y)<=s.radius&&(window.world.selectedPlanet=s)}}catch(c){l.e(c)}finally{l.f()}i.x=o,i.y=u,Xr()}}function Kr(e,t){return!(e.x+a.HALF_MINIMAP_VIEW_WIDTH+t.radius<t.x||e.x-a.HALF_MINIMAP_VIEW_WIDTH-t.radius>t.x||e.y+a.HALF_MINIMAP_VIEW_HEIGHT+t.radius<t.y||e.y-a.HALF_MINIMAP_VIEW_HEIGHT-t.radius>t.y)}function Jr(e){return e?e.speed*e.lifetime*1.4:0}function zr(e){return Jr(Qr(e,a.EQUIP_TYPE_PRIMARY_WEAPON))}function Zr(){console.log("enter manage state")}function $r(e){(window.world.system.keys.up.isDown||window.world.system.keys.w.isDown)&&window.world.ship.alive&&!window.world.system.isTyping&&function(){var e=window.world,t=e.ship;i.changeGameState(a.GAME_STATE.FLY);var n=r.calcGravity(t.x,t.y,e.selectedPlanet);t.vx=n.x*-a.TAKEOFF_SPEED,t.vy=n.y*-a.TAKEOFF_SPEED}()}function ea(e){return e===a.BUILDING_TYPE_FACTORY?{spriteScale:a.FACTORY_SCALE,spriteFile:a.FACTORY_FILE,animation:!1}:e===a.BUILDING_TYPE_MINE?{spriteScale:a.MINE_SCALE,spriteFile:a.MINE_FILE,animation:!0}:(console.warn("Unknown building type ",e),{})}function ta(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=ea(e.type),u=o.spriteScale,l=o.spriteFile,s=o.animation,c=window.PIXI.Loader.shared.resources[a.SPRITESHEET_JSON].spritesheet;s?((n=new window.PIXI.AnimatedSprite(c.animations[l])).animationSpeed=a.MINE_ANIMATION_SPEED,n.play()):n=new window.PIXI.Sprite(c.textures[l]),n.anchor.set(.5,.5),n.scale.set(u,u),n.rotation=e.rotation,n.x=e.x-t.x,n.y=e.y-t.y,n.visible=!0,r||(r=i.getPlanetSprite(t)),r.addChild(n)}function na(){var e=window.world,t={type:a.BUILDING_TYPE_MINE},n=e.selectedPlanet,r=e.ship,o=aa(n,r,ra(r,n,a.MINE_WIDTH),a.MINE_WIDTH,0),l=o.x,s=o.y,c=o.rotation;null!==l?(t.width=a.MINE_WIDTH,t.x=l,t.y=s,t.rotation=c,ta(t,n),i.payResourceCost(n,r,a.MINE_COST),n.buildings.push(t),u.drawMiniMap()):console.warn("Unable to place mine")}function ra(e,t,n){var a=e.rotation+Math.PI/2,i=e.x+n*Math.cos(a),o=e.y+n*Math.sin(a);return r.normalizeRadian(Math.atan2(o-t.y,i-t.x))}function aa(e,t,n,r,i){return ia(e,t,n,r)?{x:e.x+(e.radius+10)*Math.cos(n),y:e.y+(e.radius+10)*Math.sin(n),rotation:n}:i>2*Math.PI/a.BUILDING_PLACEMENT_ROTATION_INCREMENT?{x:null,y:null,rotation:null}:aa(e,t,n+a.BUILDING_PLACEMENT_ROTATION_INCREMENT,r,++i)}function ia(e,t,n,a){var i,o=e.x+(e.radius+10)*Math.cos(n),u=e.y+(e.radius+10)*Math.sin(n),l=r.distanceBetween(o,u,t.x,t.y),s=a,c=Object(Nn.a)(e.buildings);try{for(c.s();!(i=c.n()).done;){var d=i.value,m=r.distanceBetween(o,u,d.x,d.y);m<l&&(l=m,s=d.width)}}catch(p){c.e(p)}finally{c.f()}return l>a/2+s/2+15}function oa(e,t,n,r,a){var i=Number(r);isNaN(i)&&(i=0);var o=i;(""===r||e[n]-i<0)&&(o=e[n]);var u=a-(t.titanium+t.gold+t.uranium);u<o&&(o=u),t[n]+=o,e[n]-=o}function ua(){var e=window.world,t=e.selectedPlanet,n=e.ship,r={type:a.BUILDING_TYPE_FACTORY},o=aa(t,n,ra(n,t,a.FACTORY_WIDTH),a.FACTORY_WIDTH,0),l=o.x,s=o.y,c=o.rotation;null!==l?(r.width=a.MINE_WIDTH,r.x=l,r.y=s,r.rotation=c,t.buildings.push(r),ta(r,t),i.payResourceCost(t,n,a.FACTORY_COST),u.drawMiniMap()):console.warn("Unable to place factory")}function la(e){var t=window.world.selectedPlanet,n=i.createShip(e);t.ships.push(n)}function sa(e){var t=window.world.ship,n=window.world.selectedPlanet,r=window.world.lastPlanetLanded;if(ca(e,n)){if(da(t,r),window.world.ship=e,t&&t.alive&&t.spriteId)u.resetWeaponsCool(t),i.getShipSprite(t).visible=!1,t.spriteId=null;var a=i.getShipSprite(e);a.visible=!0,e.rotation=n.lastLandingDir,a.rotation=e.rotation;var o=n.radius+e.spriteWidth/2;e.x=n.x+o*Math.cos(e.rotation),e.y=n.y+o*Math.sin(e.rotation),window.world.lastPlanetLanded=n,u.repositionScreen()}else console.warn("Unable to remove ship from planet ",e," planet=",n)}function ca(e,t){var n=t.ships.filter((function(t){return t!==e})),r=n.length<t.ships.length;return t.ships=n,r}function da(e,t){e.alive&&e.armorMax>0&&t.ships.push(e)}function ma(e){var t,n=Object(Nn.a)(e.buildings);try{for(n.s();!(t=n.n()).done;){if(t.value.type===a.BUILDING_TYPE_FACTORY)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}function pa(e){var t=window.world.selectedPlanet,n=bn.a.cloneDeep(e);n.id=window.world.nextId++,t.equip.push(n)}function Ea(e){return{titanium:e.armorMax-e.armor,gold:0,uranium:0}}function fa(e,t){var n=Ea(t),r=t.armorMax-t.armor;if(!i.canAfford(e,t,n)){var a=e.resources.stored.titanium+t.resources.titanium;n.titanium=a,r=a}i.payResourceCost(e,t,n),t.armor+=r}function wa(e,t){t.type===a.EQUIP_TYPE_ARMOR?(e.armor===e.armorMax&&(e.armor+=t.armorAmt),e.armorMax+=t.armorAmt):t.type===a.EQUIP_TYPE_STORAGE&&(e.resourcesMax+=t.storageAmount)}function _a(e,t,n){e.equip.push(n),wa(e,n),bn.a.remove(t.equip,(function(e){return e.id===n.id}))}function Ia(e,t,n){if(t.equip.push(n),n.type===a.EQUIP_TYPE_ARMOR)e.armorMax-=n.armorAmt,e.armor>e.armorMax&&(e.armor=e.armorMax);else if(n.type===a.EQUIP_TYPE_STORAGE){e.resourcesMax-=n.storageAmount;var r=e.resources.titanium+e.resources.gold+e.resources.uranium;if(r>e.resourcesMax){var i=this.removeResource(e,"titanium",r-e.resourcesMax);i>0&&(i=this.removeResource(e,"gold",i)),i>0&&(i=this.removeResource(e,"uranium",i)),i>0&&console.warn("Cannot remove more resources from ship still owing "+i)}}bn.a.remove(e.equip,(function(e){return e.id===n.id}))}function ya(e,t,n){if(e.resources[t]-=n,e.resources[t]<0){var r=Math.abs(e.resources[t]);return e.resources[t]=0,r}return 0}function ha(e,t){return!!(e&&e.equip&&t)&&(!(e.equip.length>=e.equipMax)&&(![pt,Et,wt].includes(t.type)||!e.equip.find((function(e){return e.type===t.type}))))}function va(e,t){localStorage.getItem(e)&&localStorage.removeItem(e),localStorage.setItem(e,JSON.stringify(t))}function Sa(e){if(e){var t=localStorage.getItem(e);return t?JSON.parse(t):null}console.warn("Unable to from localStorage without a key")}function Aa(e){var t=e.target.result;e.oldVersion>=1&&t.deleteObjectStore("world"),t.createObjectStore("world",{keyPath:"saveGameName"})}function Ta(e){var t=indexedDB.open("astrominer",1);t.onerror=function(e){console.log("error ",e)},t.onupgradeneeded=Aa,t.onsuccess=function(t){var n=t.target.result.transaction(["world"]).objectStore("world").get(e);n.onerror=function(e){console.log("Request error loading:",e)},n.onsuccess=function(e){var t=n.result,a=window.world.system;window.world=t,window.world.system=a,window.world.system.spriteContainers.planets.removeChildren(),window.world.system.planetSpriteCache={},window.world.system.shipSpriteCache={},window.world.system.spriteContainers.ships.removeChildren(),i.setupPlanetCache(),window.world.ship.spriteId=null,Gn(window.world.ship).visible=!0;var o,l=Object(Nn.a)(window.world.aliens);try{for(l.s();!(o=l.n()).done;){var s=o.value;s.spriteId&&(s.spriteId=null,Gn(s).visible=!0)}}catch(p){l.e(p)}finally{l.f()}var c,d=Object(Nn.a)(window.world.planets);try{for(d.s();!(c=d.n()).done;){var m=c.value;m.spriteId&&(m.spriteId=null,jn(m))}}catch(p){d.e(p)}finally{d.f()}u.repositionScreen(),r.showToast("Loaded game")}}}function Pa(e){var t=bn.a.cloneDeep(bn.a.omit(window.world,["system"]));t.saveGameName=e;var n=indexedDB.open("astrominer",1);n.onerror=function(e){console.log("DB Request Error:",e)},n.onupgradeneeded=Aa,n.onsuccess=function(e){var n=e.target.result.transaction(["world"],"readwrite").objectStore("world").put(t);n.onsuccess=function(e){r.showToast("Saved game")},n.onerror=function(e){console.log("failed to save ",e.target)}}}function Ma(e){var t=indexedDB.open("astrominer",1);t.onerror=function(e){console.log("DB Request Error:",e)},t.onupgradeneeded=Aa,t.onsuccess=function(t){var n=t.target.result.transaction(["world"],"readwrite").objectStore("world").delete(e);n.onsuccess=function(t){r.showToast("Deleted game "+e)},n.onerror=function(e){console.log("failed to delete ",e.target)}}}n(22),n(23);var Na=function(e){Object(w.a)(n,e);var t=Object(_.a)(n);function n(){return Object(E.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){var e=window.world;return d.a.createElement("div",{className:"section"},d.a.createElement("div",null,"Ship"),d.a.createElement("div",null,"Armor ",Math.floor(e.ship.armor)," / ",e.ship.armorMax," "),d.a.createElement("div",null,"Equip (max ",e.ship.equipMax,")",e.ship.equip.map((function(e,t){return d.a.createElement("span",{key:t,className:"equip"},e.name)}))),d.a.createElement("div",{className:"section"},"Resources"),d.a.createElement("div",null," Titatium ",Math.floor(e.ship.resources.titanium)),d.a.createElement("div",null," Gold ",Math.floor(e.ship.resources.gold)),d.a.createElement("div",null," Uranium ",Math.floor(e.ship.resources.uranium)))}}]),n}(d.a.Component),ga=(n(24),n(25),function(e){Object(w.a)(n,e);var t=Object(_.a)(n);function n(e){var r;return Object(E.a)(this,n),(r=t.call(this,e)).state={titanium:"",gold:"",uranium:""},r}return Object(f.a)(n,[{key:"valueChanged",value:function(e,t){var n=Object.assign({},this.state);n[t]=e.target.value,this.setState(n)}},{key:"render",value:function(){var e=this,t=window.world,n=window.world.selectedPlanet,r=window.world.ship,o=n===window.world.lastPlanetLanded&&r.alive;return d.a.createElement("div",{className:"planet-info"},d.a.createElement("div",{className:"section"},d.a.createElement("b",null,"Planet Name")," ",t.selectedPlanet.name),d.a.createElement("div",{className:"build-button"},d.a.createElement("button",{disabled:!i.canAfford(n,o?r:null,a.MINE_COST),onClick:function(){return l.buildMine()}},"Build Mine"),"Cost: T:",a.MINE_COST.titanium," G:",a.MINE_COST.gold),d.a.createElement("div",{className:"build-button"},d.a.createElement("button",{disabled:!i.canAfford(n,o?r:null,a.FACTORY_COST),onClick:function(){return l.buildFactory()}},"Build Factory"),"Cost: T:",a.FACTORY_COST.titanium," G:",a.FACTORY_COST.gold," U:",a.FACTORY_COST.uranium),d.a.createElement("div",{className:"section"},d.a.createElement("b",null,"Resources")),d.a.createElement("div",null,"Titatium ",Math.floor(n.resources.raw.titanium)),d.a.createElement("div",null,"Gold ",Math.floor(n.resources.raw.gold)),d.a.createElement("div",null,"Uranium ",Math.floor(n.resources.raw.uranium)),o&&d.a.createElement("table",null,d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("th",null,"Resource"),d.a.createElement("th",null,"Planet"),d.a.createElement("th",null,"Transfer"),d.a.createElement("th",null,"Ship (",r.resourcesMax,")"))),d.a.createElement("tbody",null,d.a.createElement("tr",null,d.a.createElement("td",null,"Titanium"),d.a.createElement("td",null,Math.floor(n.resources.stored.titanium)),d.a.createElement("td",null,d.a.createElement("span",{className:"transfer-button",onClick:function(){return l.transferResource(r.resources,n.resources.stored,"titanium",e.state.titanium,a.PLANET_RESOURCE_MAX)}},d.a.createElement("i",{className:"fa fa-arrow-left"}," ")),d.a.createElement("input",{type:"text",className:"transfer-input",value:this.state.titanium,onChange:function(t){return e.valueChanged(t,"titanium")}}),d.a.createElement("span",{className:"transfer-button",onClick:function(){return l.transferResource(n.resources.stored,r.resources,"titanium",e.state.titanium,r.resourcesMax)}},d.a.createElement("i",{className:"fa fa-arrow-right"}," "))),d.a.createElement("td",null,Math.floor(r.resources.titanium))),d.a.createElement("tr",null,d.a.createElement("td",null,"Gold"),d.a.createElement("td",null,Math.floor(n.resources.stored.gold)),d.a.createElement("td",null,d.a.createElement("span",{className:"transfer-button",onClick:function(){return l.transferResource(r.resources,n.resources.stored,"gold",e.state.gold,a.PLANET_RESOURCE_MAX)}},d.a.createElement("i",{className:"fa fa-arrow-left"}," ")),d.a.createElement("input",{type:"text",className:"transfer-input",value:this.state.gold,onChange:function(t){return e.valueChanged(t,"gold")}}),d.a.createElement("span",{className:"transfer-button",onClick:function(){return l.transferResource(n.resources.stored,r.resources,"gold",e.state.gold,r.resourcesMax)}},d.a.createElement("i",{className:"fa fa-arrow-right"}," "))),d.a.createElement("td",null,Math.floor(r.resources.gold))),d.a.createElement("tr",null,d.a.createElement("td",null,"Uranium"),d.a.createElement("td",null,Math.floor(n.resources.stored.uranium)),d.a.createElement("td",null,d.a.createElement("span",{className:"transfer-button",onClick:function(){return l.transferResource(r.resources,n.resources.stored,"uranium",e.state.uranium,a.PLANET_RESOURCE_MAX)}},d.a.createElement("i",{className:"fa fa-arrow-left"}," ")),d.a.createElement("input",{type:"text",className:"transfer-input",value:this.state.uranium,onChange:function(t){return e.valueChanged(t,"uranium")}}),d.a.createElement("span",{className:"transfer-button",onClick:function(){return l.transferResource(n.resources.stored,r.resources,"uranium",e.state.uranium,r.resourcesMax)}},d.a.createElement("i",{className:"fa fa-arrow-right"}," "))),d.a.createElement("td",null,Math.floor(r.resources.uranium))))),!o&&d.a.createElement("table",null,d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("th",null,"Resource"),d.a.createElement("th",null,"Planet"))),d.a.createElement("tbody",null,d.a.createElement("tr",null,d.a.createElement("td",null,"Titanium"),d.a.createElement("td",null,Math.floor(n.resources.stored.titanium))),d.a.createElement("tr",null,d.a.createElement("td",null,"Gold"),d.a.createElement("td",null,Math.floor(n.resources.stored.gold))),d.a.createElement("tr",null,d.a.createElement("td",null,"Uranium"),d.a.createElement("td",null,Math.floor(n.resources.stored.uranium))))))}}]),n}(d.a.Component)),ba=(n(26),n(27),n(28),function(e){Object(w.a)(n,e);var t=Object(_.a)(n);function n(e){var r;return Object(E.a)(this,n),(r=t.call(this,e)).state={},r}return Object(f.a)(n,[{key:"build",value:function(e){e.objType===a.OBJ_SHIP?l.buildShip(this.props.template):e.objType===a.OBJ_EQUIP&&l.buildEquip(this.props.template)}},{key:"render",value:function(){var e=this,t=window.world,n=t.selectedPlanet,r=t.ship;return d.a.createElement("div",{className:"build-button"},d.a.createElement("button",{disabled:!l.hasFactory(n)||!i.canAfford(n,r,this.props.template.cost),onClick:function(){return e.build(e.props.template)}},this.props.template.name),d.a.createElement("span",{className:"cost"},"Cost: T:",this.props.template.cost.titanium," G:",this.props.template.cost.gold," U:",this.props.template.cost.uranium))}}]),n}(d.a.Component)),xa=function(e){Object(w.a)(n,e);var t=Object(_.a)(n);function n(e){var r;return Object(E.a)(this,n),(r=t.call(this,e)).state={},r}return Object(f.a)(n,[{key:"render",value:function(){return d.a.createElement("div",{className:"factory-info"},d.a.createElement("div",{className:"title"}," Ships "),d.a.createElement("div",{className:"build-ship"},window.world.blueprints.ship.map((function(e,t){return d.a.createElement(ba,{key:"ship"+t,template:e})}))),d.a.createElement("div",{className:"title"}," Equipment "),d.a.createElement("div",{className:"build-equip"},window.world.blueprints.equip.map((function(e,t){return d.a.createElement(ba,{key:"equip"+t,template:e})}))))}}]),n}(d.a.Component),Ra=(n(29),function(e){Object(w.a)(n,e);var t=Object(_.a)(n);function n(e){var r;return Object(E.a)(this,n),(r=t.call(this,e)).state={selectedShip:null},r}return Object(f.a)(n,[{key:"viewShip",value:function(e){this.setState({selectedShip:e})}},{key:"startUsingShip",value:function(){l.switchToShip(this.state.selectedShip),this.setState({selectedShip:null})}},{key:"render",value:function(){var e=this,t=window.world,n=t.selectedPlanet,r=t.ship,a=this.state.selectedShip,i=n===window.world.lastPlanetLanded&&r.alive;!a&&i&&(a=r);var o=[];if(a){var u,s=Object(Nn.a)(a.equip);try{var c=function(){var e=u.value;o.push(d.a.createElement("div",{className:"item",key:e.id},e.name," \xa0",d.a.createElement("button",{onClick:function(){return l.moveEquipFromShipToPlanet(a,n,e)}},"Remove")))};for(s.s();!(u=s.n()).done;)c()}catch(m){s.e(m)}finally{s.f()}}return d.a.createElement("div",null,d.a.createElement("div",{className:"storage-section"},d.a.createElement("div",{className:"title"},"Ships"),d.a.createElement("span",{className:"item-list"},(i?[r]:[]).concat(n.ships).map((function(t,n){return d.a.createElement("div",{key:n,onClick:function(){return e.viewShip(t)},className:"ship ".concat(a===t?"selected-item":"non-selected-item")},t.name)}))),d.a.createElement("span",{className:"item-details"},null!=a&&d.a.createElement("div",null,d.a.createElement("div",{className:"item-attr"},d.a.createElement("button",{onClick:function(){return e.startUsingShip()},disabled:a===r},"Use Ship")),d.a.createElement("div",{className:"item-attr"},d.a.createElement("b",null,"Name")," ",a.name," ",a.id),d.a.createElement("div",{className:"item-attr"},d.a.createElement("b",null,"Engine")," Propulsion:",Math.floor(100*a.propulsion)," Turn:",Math.floor(100*a.turnSpeed)),d.a.createElement("div",{className:"item-attr"},d.a.createElement("b",null,"Landing")," Speed:",Math.floor(a.crashSpeed)," Angle:",Math.floor(10*a.crashAngle)),d.a.createElement("div",{className:"item-attr"},d.a.createElement("b",null,"Armor"),Math.floor(a.armor)," of ",Math.floor(a.armorMax),d.a.createElement("button",{onClick:function(){return l.repairShip(n,a)},disabled:a.armorMax<=a.armor},"Repair"),"\xa0 Cost ",Math.floor(a.armorMax-a.armor)," titanium"),d.a.createElement("div",{className:"item-attr"},d.a.createElement("b",null,"Resources Max"),Math.floor(a.resourcesMax)),d.a.createElement("div",{className:"item-attr"},d.a.createElement("b",null,"Equip")," (Max ",a.equipMax,")",o)))),d.a.createElement("div",{className:"storage-section"},d.a.createElement("div",{className:"title"},"Equipment"),d.a.createElement("span",{className:"equip-list"},n.equip.map((function(e,t){return d.a.createElement("div",{key:t,className:"item"},e.name," \xa0",d.a.createElement("button",{onClick:function(){return l.moveEquipFromPlanetToShip(a,n,e)},disabled:!l.canEquip(a,e)},"Equip"))})))))}}]),n}(d.a.Component));n(30);function La(){var e=window.world,t=Object(c.useRef)(null),n=s.loadLocalStorage(a.LOCALSTORAGE_GAME_NAMES_KEY);function r(t){t&&!n.includes(t)&&n.push(t),s.saveLocalStorage(a.LOCALSTORAGE_GAME_NAMES_KEY,n),e.system.saveGameName=t}return n||(n=[],r(null)),d.a.createElement("div",null,d.a.createElement("div",{className:"system-section"},d.a.createElement("div",{className:"section"},d.a.createElement("b",null,"Current Game")),d.a.createElement("input",{type:"text",onFocus:function(){return e.system.isTyping=!0},onBlur:function(){return e.system.isTyping=!1},ref:t}),d.a.createElement("button",{name:"Save",onClick:function(){return function(){var e=t.current.value;s.saveWorld(a.DB_GAME_PREFIX+e),r(e)}()}},"Save"),d.a.createElement("div",{className:"section"},d.a.createElement("b",null,"Saved Game")),n.map((function(r){return d.a.createElement("div",{key:r,className:"game-list-row "+(e.saveGameName===r?"selected-game":"")},d.a.createElement("span",{className:"game-list-item"},d.a.createElement("button",{onClick:function(){return s.loadWorld(a.DB_GAME_PREFIX+r)}},"Load ")),d.a.createElement("span",{className:"game-list-item"},d.a.createElement("button",{onClick:function(){return function(r){s.deleteWorld(a.DB_GAME_PREFIX+r),n=bn.a.remove(n,(function(e){return e!==r})),s.saveLocalStorage(a.LOCALSTORAGE_GAME_NAMES_KEY,n),e.saveGameName===r&&(e.saveGameName=null),t.current.value===r&&(t.current.value="")}(r)}},"Delete")),d.a.createElement("span",{className:"game-list-item"},r))}))))}function Ca(){var e,t=[{key:"planet",name:"Planet"},{key:"factory",name:"Factory"},{key:"storage",name:"Storage"},{key:"system",name:"System"}],n=Object(c.useState)("planet"),r=Object(Mn.a)(n,2),a=r[0],i=r[1];return d.a.createElement("div",{className:"tab-set"},t.map((function(e){return d.a.createElement("span",{key:e.key,className:"tab ".concat(a===e.key?"active-tab":"non-active-tab"),onClick:function(){return i(e.key)}},e.name)})),d.a.createElement("div",{className:"tab-body"},"planet"===(e=a)?d.a.createElement(ga,null):"factory"===e?d.a.createElement(xa,null):"storage"===e?d.a.createElement(Ra,null):"system"===e?d.a.createElement(La,null):void 0))}var Oa=function(e){Object(w.a)(n,e);var t=Object(_.a)(n);function n(){return Object(E.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){var e=window.world;return e.system.gameState===a.GAME_STATE.MANAGE?d.a.createElement(Ca,null):e.system.gameState===a.GAME_STATE.FLY?d.a.createElement(Na,null):d.a.createElement("div",null,"...")}}]),n}(d.a.Component),Ha=function(e){Object(w.a)(n,e);var t=Object(_.a)(n);function n(e){var l;return Object(E.a)(this,n),(l=t.call(this,e)).createPixiApp=function(){console.log("Creating PIXI app");var e=new window.PIXI.Application({width:a.SCREEN_WIDTH,height:a.SCREEN_HEIGHT});e.renderer.backgroundColor=a.BLACK,l.pixiRef.current.appendChild(e.view),window.PIXI.loader.add(a.SPRITESHEET_JSON).add(a.CRASH_JSON).load(l.setupGame),window.world.system.app=e},l.setupGame=function(){i.setupWorld(),l.setupKeyboardListeners(),i.changeGameState(a.GAME_STATE.FLY),window.world.system.app.renderer.plugins.interaction.on("pointerdown",(function(e){i.click(e)})),window.world.system.app.ticker.add((function(e){return l.mainLoop(e)}))},l.mainLoop=function(e){window.world.system.gameLoop&&(i.runBuildings(),u.moveBullets(),u.coolAllWeapons(),o.moveAliens(),window.world.system.gameLoop(e)),l.forceUpdate()},l.setupKeyboardListeners=function(){window.world.system.keys.left=r.keyboardListener("ArrowLeft"),window.world.system.keys.right=r.keyboardListener("ArrowRight"),window.world.system.keys.up=r.keyboardListener("ArrowUp"),window.world.system.keys.down=r.keyboardListener("ArrowDown"),window.world.system.keys.space=r.keyboardListener(" "),window.world.system.keys.w=r.keyboardListener("w"),window.world.system.keys.a=r.keyboardListener("a"),window.world.system.keys.s=r.keyboardListener("s"),window.world.system.keys.d=r.keyboardListener("d"),window.world.system.keys.q=r.keyboardListener("q"),window.world.system.keys.e=r.keyboardListener("e"),window.world.system.keys.x=r.keyboardListener("x")},console.log("created world"),window.world=i.createEmptyWorld(),l.pixiRef=d.a.createRef(),l}return Object(f.a)(n,[{key:"componentDidMount",value:function(){console.log("mounted"),this.createPixiApp()}},{key:"render",value:function(){return d.a.createElement("table",null,d.a.createElement("tbody",null,d.a.createElement("tr",null,d.a.createElement("td",null,d.a.createElement("div",{ref:this.pixiRef})),d.a.createElement("td",{className:"info-panel"},d.a.createElement(Oa,null)))))}}]),n}(d.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));p.a.render(d.a.createElement(Ha,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[13,1,2]]]);
//# sourceMappingURL=main.27277a56.chunk.js.map