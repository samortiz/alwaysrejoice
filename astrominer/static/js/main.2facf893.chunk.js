(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],[,,,,,,,,,function(e,t,n){e.exports=n(26)},,,,,function(e,t,n){},function(e,t,n){},,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"distanceBetween",(function(){return _})),n.d(r,"midPoint",(function(){return w})),n.d(r,"normalizeRadian",(function(){return I})),n.d(r,"calcGravity",(function(){return v})),n.d(r,"directionTo",(function(){return y})),n.d(r,"dirComponents",(function(){return T})),n.d(r,"randomInt",(function(){return S})),n.d(r,"randomFloat",(function(){return A})),n.d(r,"randomBool",(function(){return P})),n.d(r,"getPointFrom",(function(){return M})),n.d(r,"getVertexData",(function(){return b})),n.d(r,"toGlobal",(function(){return N})),n.d(r,"keyboardListener",(function(){return x}));var a={};n.r(a),n.d(a,"BLACK",(function(){return R})),n.d(a,"RED",(function(){return L})),n.d(a,"BLUE",(function(){return g})),n.d(a,"WHITE",(function(){return H})),n.d(a,"MED_GREY",(function(){return C})),n.d(a,"DARK_GREY",(function(){return O})),n.d(a,"LIGHT_GREY",(function(){return F})),n.d(a,"GAME_STATE",(function(){return D})),n.d(a,"SCREEN_WIDTH",(function(){return U})),n.d(a,"SCREEN_HEIGHT",(function(){return j})),n.d(a,"HALF_SCREEN_WIDTH",(function(){return k})),n.d(a,"HALF_SCREEN_HEIGHT",(function(){return G})),n.d(a,"MINIMAP_WIDTH",(function(){return q})),n.d(a,"MINIMAP_HEIGHT",(function(){return Y})),n.d(a,"HALF_MINIMAP_WIDTH",(function(){return B})),n.d(a,"HALF_MINIMAP_HEIGHT",(function(){return W})),n.d(a,"MINIMAP_VIEW_WIDTH",(function(){return X})),n.d(a,"MINIMAP_VIEW_HEIGHT",(function(){return Q})),n.d(a,"HALF_MINIMAP_VIEW_WIDTH",(function(){return V})),n.d(a,"HALF_MINIMAP_VIEW_HEIGHT",(function(){return K})),n.d(a,"MINIMAP_SCALE_X",(function(){return J})),n.d(a,"MINIMAP_SCALE_Y",(function(){return z})),n.d(a,"SPRITESHEET_JSON",(function(){return Z})),n.d(a,"ROCK_PLANET_FILE",(function(){return $})),n.d(a,"RED_PLANET_FILE",(function(){return ee})),n.d(a,"PURPLE_PLANET_FILE",(function(){return te})),n.d(a,"GREEN_PLANET_FILE",(function(){return ne})),n.d(a,"MINE_FILE",(function(){return re})),n.d(a,"FACTORY_FILE",(function(){return ae})),n.d(a,"SHIP_CARGO_FILE",(function(){return ie})),n.d(a,"SHIP_EXPLORER_FILE",(function(){return oe})),n.d(a,"SHIP_FAST_FILE",(function(){return ue})),n.d(a,"SHIP_FIGHTER_FILE",(function(){return se})),n.d(a,"SHIP_HEAVY_FILE",(function(){return le})),n.d(a,"STAR_BACKGROUND_FILE",(function(){return ce})),n.d(a,"CRASH_JSON",(function(){return de})),n.d(a,"CRASH",(function(){return pe})),n.d(a,"BULLET_FILE",(function(){return Ee})),n.d(a,"BULLET_BLUE_FILE",(function(){return me})),n.d(a,"BULLET_STAPLE_FILE",(function(){return fe})),n.d(a,"ALIEN_SHIP_FILE",(function(){return he})),n.d(a,"ALIEN_SHIP_SMALL_FILE",(function(){return _e})),n.d(a,"ALIEN_SHIP_LARGE_FILE",(function(){return we})),n.d(a,"ALIEN_SHIP_FIRE_FILE",(function(){return Ie})),n.d(a,"UNIVERSE_RADIUS",(function(){return ve})),n.d(a,"PLANET_CACHE_STEP_SIZE",(function(){return ye})),n.d(a,"PLANET_CACHE_NUM_STEPS",(function(){return Te})),n.d(a,"PLAYER",(function(){return Se})),n.d(a,"ALIEN",(function(){return Ae})),n.d(a,"PLAYER_STARTING_RESOURCES",(function(){return Pe})),n.d(a,"GRAVITATIONAL_CONST",(function(){return Me})),n.d(a,"ALLOWED_OVERLAP",(function(){return be})),n.d(a,"TAKEOFF_SPEED",(function(){return Ne})),n.d(a,"PLANET_RESOURCE_MAX",(function(){return xe})),n.d(a,"PLAYER_START_X",(function(){return Re})),n.d(a,"PLAYER_START_Y",(function(){return Le})),n.d(a,"NUM_ALIENS",(function(){return ge})),n.d(a,"MIN_ALIEN_DIST_TO_PLANET",(function(){return He})),n.d(a,"MIN_ALIEN_DIST_TO_ALIEN",(function(){return Ce})),n.d(a,"CRIT_TYPE_BRAKE",(function(){return Oe})),n.d(a,"CRIT_TYPE_STEER_LEFT",(function(){return Fe})),n.d(a,"CRIT_TYPE_STEER_RIGHT",(function(){return De})),n.d(a,"CRIT_TYPE_ENGINE",(function(){return Ue})),n.d(a,"CRIT_TYPE_GUN",(function(){return je})),n.d(a,"CRIT_TYPE_THRUSTER",(function(){return ke})),n.d(a,"CRIT_TYPE_MISC",(function(){return Ge})),n.d(a,"BUILDING_PLACEMENT_ROTATION_INCREMENT",(function(){return qe})),n.d(a,"BUILDING_TYPE_MINE",(function(){return Ye})),n.d(a,"MINE_SCALE",(function(){return Be})),n.d(a,"MINE_PLACEMENT_FROM_SHIP",(function(){return We})),n.d(a,"MINE_ANIMATION_SPEED",(function(){return Xe})),n.d(a,"MINE_SPEED_TITATIUM",(function(){return Qe})),n.d(a,"MINE_SPEED_GOLD",(function(){return Ve})),n.d(a,"MINE_SPEED_URANIUM",(function(){return Ke})),n.d(a,"MINE_COST",(function(){return Je})),n.d(a,"BUILDING_TYPE_FACTORY",(function(){return ze})),n.d(a,"FACTORY_COST",(function(){return Ze})),n.d(a,"FACTORY_SCALE",(function(){return $e})),n.d(a,"FACTORY_PLACEMENT_FROM_SHIP",(function(){return et})),n.d(a,"EQUIP_TYPE_BRAKE",(function(){return tt})),n.d(a,"EQUIP_TYPE_PRIMARY_WEAPON",(function(){return nt})),n.d(a,"EQUIP_TYPE_THRUSTER",(function(){return rt})),n.d(a,"EQUIP_TYPE_ARMOR",(function(){return at})),n.d(a,"EQUIP_TYPE_REPAIR_DROID",(function(){return it})),n.d(a,"EQUIP_TYPE_MISC",(function(){return ot})),n.d(a,"EQUIP_TYPE_SPEED",(function(){return ut})),n.d(a,"EQUIP_TYPE_TURN",(function(){return st})),n.d(a,"EQUIP_TYPE_STORAGE",(function(){return lt})),n.d(a,"THRUST_MOMENTUM",(function(){return ct})),n.d(a,"THRUST_BLINK",(function(){return dt})),n.d(a,"OBJ_EQUIP",(function(){return pt})),n.d(a,"OBJ_SHIP",(function(){return Et})),n.d(a,"ALIEN_AI_TURRET",(function(){return mt})),n.d(a,"ALIEN_AI_CREEPER",(function(){return ft})),n.d(a,"EQUIP_BRAKE",(function(){return ht})),n.d(a,"EQUIP_BLINK_BRAKE",(function(){return _t})),n.d(a,"EQUIP_SPEED_BOOST",(function(){return wt})),n.d(a,"EQUIP_TURN_BOOST",(function(){return It})),n.d(a,"EQUIP_STORAGE",(function(){return vt})),n.d(a,"EQUIP_BLASTER",(function(){return yt})),n.d(a,"EQUIP_FAST_BLASTER",(function(){return Tt})),n.d(a,"EQUIP_STREAM_BLASTER",(function(){return St})),n.d(a,"EQUIP_THRUSTER",(function(){return At})),n.d(a,"EQUIP_BLINK_THRUSTER",(function(){return Pt})),n.d(a,"EQUIP_R2D2",(function(){return Mt})),n.d(a,"EQUIP_ALIEN_BLASTER",(function(){return bt})),n.d(a,"EQUIP_STAPLE_GUN",(function(){return Nt})),n.d(a,"EQUIP_ARMOR",(function(){return xt})),n.d(a,"ALL_EQUIP",(function(){return Rt})),n.d(a,"SHIP_EXPLORER",(function(){return Lt})),n.d(a,"SHIP_CARGO",(function(){return gt})),n.d(a,"SHIP_FAST",(function(){return Ht})),n.d(a,"SHIP_HEAVY",(function(){return Ct})),n.d(a,"SHIP_FIGHTER",(function(){return Ot})),n.d(a,"SHIP_ALIEN_TURRET",(function(){return Ft})),n.d(a,"SHIP_ALIEN",(function(){return Dt})),n.d(a,"SHIP_ALIEN_LARGE",(function(){return Ut})),n.d(a,"SHIP_ALIEN_FIRE",(function(){return jt})),n.d(a,"ALL_SHIPS",(function(){return kt})),n.d(a,"UNIVERSE_RINGS",(function(){return Gt})),n.d(a,"MINING_XP_LEVELS",(function(){return qt})),n.d(a,"ALIEN_XP_LEVELS",(function(){return Yt}));var i={};n.r(i),n.d(i,"createEmptyWorld",(function(){return Qt})),n.d(i,"setupWorld",(function(){return Vt})),n.d(i,"createBackground",(function(){return Kt})),n.d(i,"createPlanets",(function(){return Jt})),n.d(i,"createPlanet",(function(){return en})),n.d(i,"createShip",(function(){return tn})),n.d(i,"createAlien",(function(){return nn})),n.d(i,"createAliens",(function(){return rn})),n.d(i,"setupMiniMap",(function(){return an})),n.d(i,"click",(function(){return on})),n.d(i,"changeGameState",(function(){return un})),n.d(i,"runBuildings",(function(){return sn})),n.d(i,"addAlienXp",(function(){return cn})),n.d(i,"addBlueprint",(function(){return dn})),n.d(i,"canAfford",(function(){return pn})),n.d(i,"payResourceCost",(function(){return En})),n.d(i,"payResource",(function(){return mn})),n.d(i,"setupExplosionSheet",(function(){return fn})),n.d(i,"createExplosionSprite",(function(){return hn})),n.d(i,"setupPlanetCache",(function(){return _n})),n.d(i,"getPlanetsNear",(function(){return wn}));var o={};n.r(o),n.d(o,"enterFlyState",(function(){return In})),n.d(o,"flyLoop",(function(){return vn})),n.d(o,"coolAllWeapons",(function(){return yn})),n.d(o,"coolWeapons",(function(){return Tn})),n.d(o,"resetWeaponsCool",(function(){return Sn})),n.d(o,"runRepairDroids",(function(){return An})),n.d(o,"moveBackground",(function(){return Pn})),n.d(o,"planetInView",(function(){return Mn})),n.d(o,"detectCollisionWithPlanet",(function(){return bn})),n.d(o,"detectCollisionWithAlien",(function(){return Nn})),n.d(o,"crash",(function(){return Ln})),n.d(o,"getExplosionSprite",(function(){return gn})),n.d(o,"destroyShip",(function(){return Hn})),n.d(o,"firePrimaryWeapon",(function(){return Dn})),n.d(o,"fireBullet",(function(){return Un})),n.d(o,"moveBullets",(function(){return kn})),n.d(o,"damageShip",(function(){return Yn})),n.d(o,"shipsCollide",(function(){return Bn})),n.d(o,"getEquip",(function(){return Wn})),n.d(o,"drawMiniMap",(function(){return Xn})),n.d(o,"clickOnMinimap",(function(){return Qn}));var u={};n.r(u),n.d(u,"enterManageState",(function(){return Kn})),n.d(u,"manageLoop",(function(){return Jn})),n.d(u,"buildMine",(function(){return zn})),n.d(u,"getBuildingPlacementRotation",(function(){return Zn})),n.d(u,"getAvailablePlanetXY",(function(){return $n})),n.d(u,"buildingFits",(function(){return er})),n.d(u,"transferResource",(function(){return tr})),n.d(u,"buildFactory",(function(){return nr})),n.d(u,"buildShip",(function(){return rr})),n.d(u,"switchToShip",(function(){return ar})),n.d(u,"removeShipFromStorage",(function(){return ir})),n.d(u,"addShipToStorage",(function(){return or})),n.d(u,"beginUsingShip",(function(){return ur})),n.d(u,"hasFactory",(function(){return sr})),n.d(u,"buildEquip",(function(){return lr})),n.d(u,"costToRepair",(function(){return cr})),n.d(u,"repairShip",(function(){return dr}));var s={};n.r(s),n.d(s,"moveAliens",(function(){return pr})),n.d(s,"shootAtPlayer",(function(){return Er})),n.d(s,"turretAi",(function(){return mr})),n.d(s,"creeperAi",(function(){return fr})),n.d(s,"checkForCollisionWithPlanet",(function(){return hr})),n.d(s,"checkForCollisionWithAlien",(function(){return _r}));var l=n(0),c=n.n(l),d=n(8),p=n.n(d),E=(n(14),n(2)),m=n(3),f=n(5),h=n(4);n(15);function _(e,t,n,r){return Math.sqrt(Math.pow(e-n,2)+Math.pow(t-r,2))}function w(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]}function I(e){var t=e;return t<0&&(t+=2*Math.PI),t>2*Math.PI&&(t-=2*Math.PI),t}function v(e,t,n){var r=_(e,t,n.x,n.y);r<10&&(r=10);var i=Math.atan2(e-n.x,t-n.y);return{x:a.GRAVITATIONAL_CONST*n.mass/Math.pow(r,2)*-Math.sin(i),y:a.GRAVITATIONAL_CONST*n.mass/Math.pow(r,2)*-Math.cos(i),dir:i}}function y(e,t,n,r){return I(Math.atan2(e-n,t-r))}function T(e,t){return{xAmt:t*-Math.sin(e),yAmt:t*-Math.cos(e)}}function S(e,t){var n=Math.ceil(e),r=Math.floor(t);return Math.floor(Math.random()*(r-n+1)+n)}function A(e,t){return e+Math.random()*(t-e)}function P(){return Math.random()>.5}function M(e,t,n,r){return{x:e+r*Math.cos(n),y:t+r*Math.sin(n)}}function b(e,t,n){n.calculateVertices();var r=[];return r.push(N(e,t,n.vertexData[0],n.vertexData[1])),r.push(N(e,t,n.vertexData[2],n.vertexData[3])),r.push(N(e,t,n.vertexData[4],n.vertexData[5])),r.push(N(e,t,n.vertexData[6],n.vertexData[7])),r.push(w(r[0],r[1])),r.push(w(r[1],r[2])),r.push(w(r[2],r[3])),r.push(w(r[3],r[0])),r}function N(e,t,n,r){return[e+(n-a.HALF_SCREEN_WIDTH),t+(r-a.HALF_SCREEN_HEIGHT)]}function x(e){var t={};t.value=e,t.isDown=!1,t.isUp=!0,t.press=void 0,t.release=void 0,t.downHandler=function(e){e.key===t.value&&(t.isUp&&t.press&&t.press(),t.isDown=!0,t.isUp=!1,e.preventDefault())},t.upHandler=function(e){e.key===t.value&&(t.isDown&&t.release&&t.release(),t.isDown=!1,t.isUp=!0,e.preventDefault())};var n=t.downHandler.bind(t),r=t.upHandler.bind(t);return window.addEventListener("keydown",n,!1),window.addEventListener("keyup",r,!1),t.unsubscribe=function(){window.removeEventListener("keydown",n),window.removeEventListener("keyup",r)},t}var R=0,L=16711680,g=255,H=16777215,C=8421504,O=3158064,F=9474192,D={INIT:"init",FLY:"fly",MANAGE:"manage"},U=1e3,j=1e3,k=U/2,G=j/2,q=120,Y=120,B=q/2,W=Y/2,X=4e3,Q=4e3,V=X/2,K=Q/2,J=q/X,z=Y/Q,Z="images/spritesheet.json",$="rock_planet.png",ee="red_planet.png",te="purple_planet.png",ne="green_planet.png",re="mine",ae="factory.png",ie="ship_cargo.png",oe="ship_explorer.png",ue="ship_fast.png",se="ship_fighter.png",le="ship_heavy.png",ce="images/stars.png",de="images/crash.json",pe="crash",Ee="bullet.png",me="bullet_blue.png",fe="bullet_white.png",he="alien.png",_e="alien_small.png",we="alien_large.png",Ie="alien_fire.png",ve=17e3,ye=U,Te=2*ve/ye,Se="player",Ae="alien",Pe={titanium:30,gold:20,uranium:0},Me=2,be=2,Ne=10,xe=99999999,Re=-(ve+1e3),Le=0,ge=1e3,He=50,Ce=3,Oe="Brake",Fe="Steer Left",De="Steer Right",Ue="Engine",je="Engine",ke="Thruster",Ge="Misc",qe=.1,Ye="mine",Be=.25,We=50,Xe=.5,Qe=.0166,Ve=.0083,Ke=.0033,Je={titanium:20,gold:10,uranium:0},ze="factory",Ze={titanium:50,gold:20,uranium:10},$e=.25,et=50,tt="Brake",nt="Primary Weapon",rt="Thruster",at="Armor",it="Repair Droid",ot="Misc",ut="Speed",st="Turn",lt="Storage",ct="Thrust Momentum",dt="Thrust Blink",pt="Equip",Et="Ship",mt="ALIEN_AI_TURRET",ft="ALIEN_AI_CREEPER",ht={name:"Brake",objType:pt,type:tt,brakeSpeedPct:.04,crit:{type:Oe,maxHits:1,hits:0,pctLoss:.95},cost:{titanium:20,gold:10,uranium:0}},_t={name:"Blink Brake",objType:pt,type:tt,brakeSpeedPct:0,crit:{type:Oe,maxHits:1,hits:0,pctLoss:1},cost:{titanium:50,gold:50,uranium:30}},wt={name:"Speed Booster",objType:pt,type:ut,boostSpeed:.05,crit:{type:Ge,maxHits:1,hits:0,pctLoss:1},cost:{titanium:0,gold:10,uranium:20}},It={name:"Turn Booster",objType:pt,type:st,boostSpeed:.05,crit:{type:Ge,maxHits:1,hits:0,pctLoss:1},cost:{titanium:0,gold:10,uranium:20}},vt={name:"Storage",objType:pt,type:lt,storageAmount:100,crit:{type:Ge,maxHits:1,hits:0,pctLoss:1},cost:{titanium:50,gold:0,uranium:0}},yt={name:"Blaster",objType:pt,type:nt,coolTime:25,cool:0,damage:10,speed:2.5,lifetime:100,bulletFile:Ee,crit:{type:je,maxHits:1,hits:0},cost:{titanium:10,gold:0,uranium:20}},Tt={name:"Fast Blaster",objType:pt,type:nt,coolTime:10,cool:0,damage:10,speed:4,lifetime:80,bulletFile:Ee,crit:{type:je,maxHits:1,hits:0},cost:{titanium:20,gold:20,uranium:40}},St={name:"Stream Blaster",objType:pt,type:nt,coolTime:3,cool:0,damage:7,speed:6,lifetime:70,bulletFile:Ee,crit:{type:je,maxHits:1,hits:0},cost:{titanium:30,gold:30,uranium:60}},At={name:"Thruster",objType:pt,type:rt,thrustSpeed:.08,thrustType:ct,crit:{type:ke,maxHits:1,hits:0,pctLoss:.95},cost:{titanium:40,gold:40,uranium:10}},Pt={name:"Blink Thruster",objType:pt,type:rt,thrustSpeed:2.5,thrustType:dt,crit:{type:ke,maxHits:1,hits:0,pctLoss:.95},cost:{titanium:60,gold:50,uranium:10}},Mt={name:"R2D2 Repair Droid",objType:pt,type:it,repairSpeed:.03,crit:{type:Ge,maxHits:1,hits:0,pctLoss:1},cost:{titanium:20,gold:100,uranium:50}},bt={name:"Alien Blaster",objType:pt,type:nt,coolTime:20,cool:0,damage:4,speed:2,lifetime:120,bulletFile:me,crit:{type:je,maxHits:1,hits:0},cost:{titanium:10,gold:30,uranium:50}},Nt={name:"Staple Gun",objType:pt,type:nt,coolTime:3,cool:0,damage:1.5,speed:3,lifetime:300,bulletFile:fe,crit:{type:je,maxHits:1,hits:0},cost:{titanium:10,gold:30,uranium:50}},xt={name:"Armor Plate",objType:pt,type:at,armorAmt:100,crit:{type:Ge,maxHits:1,hits:0,pctLoss:1},cost:{titanium:50,gold:0,uranium:0}},Rt=[ht,_t,wt,It,yt,Tt,St,At,Pt,Mt,bt,xt],Lt={name:"Explorer",objType:Et,propulsion:.05,turnSpeed:.05,resourcesMax:50,resources:{titanium:0,gold:0,uranium:0},equipMax:2,equip:[ht,yt],crits:[{type:Fe,maxHits:1,hits:0,pctLoss:.95},{type:De,maxHits:1,hits:0,pctLoss:.95},{type:Ue,maxHits:1,hits:0,pctLoss:.8}],armorMax:50,armor:50,crashSpeed:2,crashAngle:.5,imageScale:.6,imageFile:oe,cost:{titanium:40,gold:30,uranium:30}},gt={name:"Cargo",objType:Et,propulsion:.025,turnSpeed:.04,resourcesMax:600,resources:{titanium:0,gold:0,uranium:0},equipMax:2,equip:[ht],armorMax:20,armor:20,crashSpeed:1.2,crashAngle:.3,imageScale:.4,imageFile:ie,cost:{titanium:100,gold:50,uranium:50}},Ht={name:"Fast",objType:Et,propulsion:.1,turnSpeed:.08,resourcesMax:40,resources:{titanium:0,gold:0,uranium:0},equipMax:3,equip:[ht],armorMax:50,armor:50,crashSpeed:2,crashAngle:.5,imageScale:.3,imageFile:ue,cost:{titanium:200,gold:100,uranium:50}},Ct={name:"Heavy",objType:Et,propulsion:.05,turnSpeed:.05,resourcesMax:300,resources:{titanium:0,gold:0,uranium:0},equipMax:6,equip:[ht],armorMax:300,armor:300,crashSpeed:1.5,crashAngle:.4,imageScale:.4,imageFile:le,cost:{titanium:500,gold:300,uranium:150}},Ot={name:"Fighter",objType:Et,propulsion:.08,turnSpeed:.07,resourcesMax:100,resources:{titanium:0,gold:0,uranium:0},equipMax:5,equip:[ht],armorMax:200,armor:200,crashSpeed:1.5,crashAngle:.6,imageScale:.5,imageFile:se,cost:{titanium:500,gold:500,uranium:500}},Ft={name:"Alien Turret",objType:Et,propulsion:.05,turnSpeed:.05,resourcesMax:100,resources:{titanium:0,gold:0,uranium:0},equipMax:3,equip:[ht,bt],crits:[{type:Fe,maxHits:1,hits:0,pctLoss:.95},{type:De,maxHits:1,hits:0,pctLoss:.95},{type:Ue,maxHits:1,hits:0,pctLoss:.8}],armorMax:100,armor:100,crashSpeed:2,crashAngle:10,imageScale:.8,imageFile:_e,cost:{titanium:50,gold:50,uranium:50},aiType:mt},Dt={name:"Alien Ship",objType:Et,propulsion:.05,turnSpeed:.05,resourcesMax:100,resources:{titanium:0,gold:0,uranium:0},equipMax:3,equip:[ht,bt],crits:[{type:Fe,maxHits:1,hits:0,pctLoss:.95},{type:De,maxHits:1,hits:0,pctLoss:.95},{type:Ue,maxHits:1,hits:0,pctLoss:.8}],armorMax:100,armor:100,crashSpeed:2,crashAngle:10,imageScale:.9,imageFile:he,cost:{titanium:150,gold:100,uranium:80},aiType:ft},Ut={name:"Alien Ship",objType:Et,propulsion:.03,turnSpeed:.05,resourcesMax:100,resources:{titanium:0,gold:0,uranium:0},equipMax:3,equip:[ht,bt],crits:[{type:Fe,maxHits:1,hits:0,pctLoss:.95},{type:De,maxHits:1,hits:0,pctLoss:.95},{type:Ue,maxHits:1,hits:0,pctLoss:.8}],armorMax:300,armor:300,crashSpeed:2,crashAngle:10,imageScale:1,imageFile:we,cost:{titanium:150,gold:100,uranium:80},aiType:ft},jt={name:"Alien Fire",objType:Et,propulsion:.08,turnSpeed:.05,resourcesMax:100,resources:{titanium:0,gold:0,uranium:0},equipMax:3,equip:[ht,Nt],crits:[{type:Fe,maxHits:1,hits:0,pctLoss:.95},{type:De,maxHits:1,hits:0,pctLoss:.95},{type:Ue,maxHits:1,hits:0,pctLoss:.8}],armorMax:250,armor:250,crashSpeed:2,crashAngle:10,imageScale:1.5,imageFile:Ie,cost:{titanium:250,gold:200,uranium:80},aiType:ft},kt=[Lt,gt,Ht,Ct,Ot,Ft],Gt=[{planetCount:1,minDist:1,maxDist:2,minDistToOtherPlanet:10,minPlanetScale:400,maxPlanetScale:401,planetFiles:[ne],aliens:[{count:0,file:null}]},{planetCount:90,minDist:1400,maxDist:5e3,minDistToOtherPlanet:150,minPlanetScale:100,maxPlanetScale:180,planetFiles:[ee,te,ne],aliens:[{count:500,file:Ut},{count:500,file:jt},{count:200,file:Ft}]},{planetCount:550,minDist:5e3,maxDist:1e4,minDistToOtherPlanet:150,minPlanetScale:60,maxPlanetScale:100,planetFiles:[$,ee],aliens:[{count:1500,file:Dt},{count:100,file:Ut}]},{planetCount:1200,minDist:1e4,maxDist:15e3,minDistToOtherPlanet:150,minPlanetScale:20,maxPlanetScale:90,planetFiles:[$],aliens:[{count:750,file:Ft},{count:75,file:Dt}]},{planetCount:350,minDist:15e3,maxDist:ve,minDistToOtherPlanet:300,minPlanetScale:20,maxPlanetScale:90,planetFiles:[$],aliens:[]}],qt=[{xp:10,obj:yt},{xp:100,obj:gt},{xp:200,obj:xt},{xp:400,obj:Ht},{xp:1e3,obj:Tt},{xp:1500,obj:wt},{xp:2e3,obj:It},{xp:3e3,obj:vt},{xp:5e3,obj:At},{xp:8e3,obj:Ct},{xp:1e4,obj:Ot}],Yt=[{xp:100,obj:bt},{xp:300,obj:_t},{xp:500,obj:Pt},{xp:1e3,obj:St},{xp:1500,obj:Mt},{xp:2e3,obj:Ft}],Bt=n(1),Wt=n(6),Xt=n.n(Wt);function Qt(){return{ship:null,aliens:[],bullets:[],planets:[],keys:{},app:null,gameState:a.GAME_STATE.INIT,gameLoop:null,selectedPlanet:{resources:{}},bgSprite:null,explosions:[],explosionSheet:null,blueprints:{ship:[a.SHIP_EXPLORER],equip:[a.EQUIP_BRAKE],miningXp:0,miningXpLevels:Xt.a.cloneDeep(a.MINING_XP_LEVELS),alienXp:0,alienXpLevels:Xt.a.cloneDeep(a.ALIEN_XP_LEVELS)}}}function Vt(){var e=window.world.app.stage,t=window.world;Kt(e),Jt(e),t.selectedPlanet=t.planets[0],window.world.shipStartX=a.PLAYER_START_X,window.world.shipStartY=a.PLAYER_START_Y,t.ship=tn(a.SHIP_EXPLORER,a.PLAYER),e.addChild(t.ship.sprite),t.ship.resources=a.PLAYER_STARTING_RESOURCES,rn(e),an(e),fn(),_n()}function Kt(e){window.world.bgSprite=new window.PIXI.TilingSprite(window.PIXI.Texture.from(a.STAR_BACKGROUND_FILE),a.SCREEN_WIDTH,a.SCREEN_HEIGHT),e.addChild(window.world.bgSprite)}function Jt(e){var t,n=Object(Bt.a)(a.UNIVERSE_RINGS);try{for(n.s();!(t=n.n()).done;)for(var i=t.value,o=0;o<i.planetCount;o++){var u=i.planetFiles[r.randomInt(0,i.planetFiles.length-1)],s=String.fromCharCode(65+Math.floor(26*Math.random()))+r.randomInt(1e3,999999),l=r.randomInt(i.minPlanetScale,i.maxPlanetScale)/100,c=l*l*800,d=l*l*20,p=en(u,s,l,500*l,{titanium:r.randomInt(d,c),gold:r.randomInt(d,c),uranium:r.randomInt(d,c)},e),E=$t(p,i.minDistToOtherPlanet,0,i.minDist,i.maxDist),m=E.x,f=E.y;p.x=m,p.y=f}}catch(h){n.e(h)}finally{n.f()}}function zt(e,t,n){var a,i=99999999999,o=null,u=Object(Bt.a)(window.world.planets);try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s!==e){var l=r.distanceBetween(t,n,s.x,s.y)-s.radius;e&&(l-=e.radius),(!o||l<i)&&(i=l,o=s)}}}catch(c){u.e(c)}finally{u.f()}return{nearestPlanet:o,nearestPlanetDist:i}}function Zt(e,t){var n,a=99999999999,i=null,o=Object(Bt.a)(window.world.aliens);try{for(o.s();!(n=o.n()).done;){var u=n.value,s=r.distanceBetween(e,t,u.x,u.y)-2*u.radius;(!i||s<a)&&(a=s,i=u)}}catch(l){o.e(l)}finally{o.f()}return{nearestAlien:i,nearestAlienDist:a}}function $t(e,t,n,a,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=r.randomFloat(0,2*Math.PI),s=r.randomInt(a,i),l=r.getPointFrom(0,0,u,s),c=l.x,d=l.y,p=9999;if(t>0){var E=zt(e,c,d),m=(E.nearestPlanet,E.nearestPlanetDist);if(m<t)return $t(e,t,n,a,i,++o);p=m}if(n>0){var f=Zt(c,d),h=(f.nearestAlien,f.nearestAlienDist);if(h<n)return $t(e,t,n,a,i,++o)}return o>200&&console.warn("Had a hard time finding a spot, it took "+o+" tries on ring "+a+" np="+p),{x:c,y:d}}function en(e,t,n,r,i,o){var u={};u.name=t,u.x=0,u.y=0,u.mass=r,u.resources={stored:{titanium:0,gold:0,uranium:0},raw:i},u.ships=[],u.equip=[],u.buildings=[],u.sprite=new window.PIXI.Container,u.sprite.x=0,u.sprite.y=0;var s=new window.PIXI.Sprite(window.PIXI.loader.resources[a.SPRITESHEET_JSON].textures[e]);return s.anchor.set(.5,.5),s.scale.set(n,n),u.sprite.addChild(s),u.radius=u.sprite.width/2,e!==a.PURPLE_PLANET_FILE&&e!==a.GREEN_PLANET_FILE||(u.radius=.93*u.radius),o.addChild(u.sprite),window.world.planets.push(u),u}function tn(e,t){var n=Xt.a.cloneDeep(e);n.id=Xt.a.uniqueId();var r,i=Object(Bt.a)(n.equip);try{for(i.s();!(r=i.n()).done;){r.value.id=Xt.a.uniqueId()}}catch(u){i.e(u)}finally{i.f()}n.owner=t,n.vx=0,n.vy=0,n.x=window.world.shipStartX,n.y=window.world.shipStartY;var o=window.PIXI.loader.resources[a.SPRITESHEET_JSON];return n.sprite=new window.PIXI.Sprite(o.textures[n.imageFile]),n.sprite.position.set(a.HALF_SCREEN_WIDTH,a.HALF_SCREEN_HEIGHT),n.sprite.anchor.set(.5,.5),n.sprite.scale.set(n.imageScale,n.imageScale),n}function nn(e,t,n,r){var i=tn(t,a.ALIEN);return window.world.aliens.push(i),i.x=n,i.y=r,i.radius=i.sprite.width/2,i.sprite.x+=100,e.addChild(i.sprite),i}function rn(e){var t,n=Object(Bt.a)(a.UNIVERSE_RINGS);try{for(n.s();!(t=n.n()).done;){var r,i=t.value,o=Object(Bt.a)(i.aliens);try{for(o.s();!(r=o.n()).done;)for(var u=r.value,s=0;s<u.count;s++){var l=$t(null,a.MIN_ALIEN_DIST_TO_PLANET,a.MIN_ALIEN_DIST_TO_ALIEN,i.minDist,i.maxDist),c=l.x,d=l.y;nn(e,u.file,c,d)}}catch(p){o.e(p)}finally{o.f()}}}catch(p){n.e(p)}finally{n.f()}}function an(e){var t=new window.PIXI.Container;e.addChild(t);var n=new window.PIXI.Graphics;n.drawRect(0,a.SCREEN_HEIGHT-a.MINIMAP_HEIGHT,a.MINIMAP_WIDTH,a.SCREEN_HEIGHT),n.renderable=!0,n.cacheAsBitmap=!0,t.addChild(n),t.mask=n;var r=new window.PIXI.Graphics;t.addChild(r),window.world.miniMapGraphics=r}function on(e){var t=e.data.global.x,n=e.data.global.y;t<a.MINIMAP_WIDTH&&n>a.SCREEN_HEIGHT-a.MINIMAP_HEIGHT&&o.clickOnMinimap(t,n)}function un(e){var t=window.world;t.gameState=e,e===a.GAME_STATE.FLY?(o.enterFlyState(),t.gameLoop=o.flyLoop):e===a.GAME_STATE.MANAGE?(u.enterManageState(),t.gameLoop=u.manageLoop):t.gameLoop=null}function sn(){var e,t=window.world,n=Object(Bt.a)(t.planets);try{for(n.s();!(e=n.n()).done;){var r,i=e.value,o=Object(Bt.a)(i.buildings);try{for(o.s();!(r=o.n()).done;){r.value.type===a.BUILDING_TYPE_MINE&&(ln(i,"titanium",a.MINE_SPEED_TITATIUM),ln(i,"gold",a.MINE_SPEED_GOLD),ln(i,"uranium",a.MINE_SPEED_URANIUM))}}catch(l){o.e(l)}finally{o.f()}if(0===i.resources.raw.titanium&&0===i.resources.raw.gold&&0===i.resources.raw.uranium){var u,s=Object(Bt.a)(i.buildings);try{for(s.s();!(u=s.n()).done;){u.value.sprite.animationSpeed=0}}catch(l){s.e(l)}finally{s.f()}}}}catch(l){n.e(l)}finally{n.f()}}function ln(e,t,n){e.resources.raw[t]>0&&(e.resources.raw[t]-=n,e.resources.stored[t]+=n,e.resources.raw[t]<=0&&(e.resources.raw[t]=0),function(e){var t=window.world.blueprints;t.miningXp+=e;var n=t.miningXpLevels[0];n&&n.xp<=t.miningXp&&(dn(n),t.miningXpLevels.shift())}(n))}function cn(e){var t=window.world.blueprints;t.alienXp+=e.armorMax;var n=t.alienXpLevels[0];n&&n.xp<=t.alienXp&&(dn(n),t.alienXpLevels.shift())}function dn(e){console.log("Level up ",e.obj.name);var t=window.world.blueprints;e.obj.objType===a.OBJ_EQUIP?t.equip.push(e.obj):e.obj.objType===a.OBJ_SHIP?t.ship.push(e.obj):console.warn("Could not find blueprint of type "+e.obj.objType+" nextLevel=",e)}function pn(e,t,n){var r=0,a=0,i=0;return e&&(r+=e.resources.stored.titanium,a+=e.resources.stored.gold,i+=e.resources.stored.uranium),t&&(r+=t.resources.titanium,a+=t.resources.gold,i+=t.resources.uranium),r>=n.titanium&&a>=n.gold&&i>=n.uranium}function En(e,t,n){mn(e,t,"titanium",n.titanium),mn(e,t,"gold",n.gold),mn(e,t,"uranium",n.uranium)}function mn(e,t,n,r){var a=-r;if(e){if((a=e.resources.stored[n]-r)>=0)return void(e.resources.stored[n]-=r);e.resources.stored[n]=0}t?(t.resources[n]=t.resources[n]+a,t.resources[n]<0&&console.warn("Ship is in debt "+t.resources[n]+" "+n)):a<0&&(e.resources.stored[n]=e.resources.stored[n]+a,console.warn("Planet is in debt "+e.resources.stored[n]+" "+n))}function fn(){window.world.explosionSheet=window.PIXI.Loader.shared.resources[a.CRASH_JSON].spritesheet,window.world.explosions.push(hn())}function hn(){var e=new window.PIXI.AnimatedSprite(window.world.explosionSheet.animations[a.CRASH]);return e.animationSpeed=.4,e.loop=!1,e.anchor.set(.5,.5),e.scale.set(2,2),e.x=a.HALF_SCREEN_WIDTH,e.y=a.HALF_SCREEN_WIDTH,e.loop=!0,e.visible=!1,window.world.explosions.push(e),window.world.app.stage.addChild(e),e}function _n(){for(var e=new Array(a.PLANET_CACHE_NUM_STEPS),t=0;t<a.PLANET_CACHE_NUM_STEPS;t++){e[t]=new Array(a.PLANET_CACHE_NUM_STEPS);for(var n=0;n<a.PLANET_CACHE_NUM_STEPS;n++){var r,i=(t-1)*a.PLANET_CACHE_STEP_SIZE-a.UNIVERSE_RADIUS,o=(t+2)*a.PLANET_CACHE_STEP_SIZE-a.UNIVERSE_RADIUS,u=(n-1)*a.PLANET_CACHE_STEP_SIZE-a.UNIVERSE_RADIUS,s=(n+2)*a.PLANET_CACHE_STEP_SIZE-a.UNIVERSE_RADIUS,l=new Array,c=Object(Bt.a)(window.world.planets);try{for(c.s();!(r=c.n()).done;){var d=r.value;d.x-d.radius>=i&&d.x+d.radius<=o&&d.y-d.radius>=u&&d.y+d.radius<=s&&l.push(d)}}catch(p){c.e(p)}finally{c.f()}e[t][n]={planets:l}}}window.world.planetCache=e}function wn(e,t){var n=Math.floor((e+a.UNIVERSE_RADIUS)/a.PLANET_CACHE_STEP_SIZE),r=Math.floor((t+a.UNIVERSE_RADIUS)/a.PLANET_CACHE_STEP_SIZE);return n<0&&(n=0),n>=a.PLANET_CACHE_NUM_STEPS&&(n=a.PLANET_CACHE_NUM_STEPS-1),r<0&&(r=0),r>=a.PLANET_CACHE_NUM_STEPS&&(r=a.PLANET_CACHE_NUM_STEPS-1),window.world.planetCache[n][r].planets}function In(){console.log("Take off")}function vn(e){var t=window.world,n=t.ship;n.sprite.visible&&(An(n),(t.keys.left.isDown||t.keys.a.isDown)&&On(n,!0),(t.keys.right.isDown||t.keys.d.isDown)&&On(n,!1),(t.keys.up.isDown||t.keys.w.isDown)&&function(e){var t=e.propulsion,n=Wn(e,a.EQUIP_TYPE_TURN);n&&(t+=n.boostSpeed);e.vx+=t*Math.cos(e.sprite.rotation),e.vy+=t*Math.sin(e.sprite.rotation)}(n),(t.keys.down.isDown||t.keys.s.isDown)&&function(e){var t=Wn(e,a.EQUIP_TYPE_BRAKE);t&&(t.brakeSpeedPct>0?(e.vx-=e.vx*t.brakeSpeedPct,e.vy-=e.vy*t.brakeSpeedPct):(e.vx=0,e.vy=0))}(n),t.keys.space.isDown&&Dn(n),t.keys.q.isDown&&Fn(n,!0),t.keys.e.isDown&&Fn(n,!1));var i,o=[],u=Object(Bt.a)(t.planets);try{for(u.s();!(i=u.n()).done;){var s=i.value;Mn(n,s)&&o.push(s)}}catch(I){u.e(I)}finally{u.f()}if(n.sprite.visible){var l,c=Object(Bt.a)(o);try{for(c.s();!(l=c.n()).done;){var d=l.value,p=r.calcGravity(n.x,n.y,d);n.vx+=p.x,n.vy+=p.y}}catch(I){c.e(I)}finally{c.f()}}if(n.x+=n.vx,n.y+=n.vy,function(){var e,t=window.world.ship,n=Object(Bt.a)(window.world.explosions);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.x=r.globalX-t.x+a.HALF_SCREEN_WIDTH,r.y=r.globalY-t.y+a.HALF_SCREEN_HEIGHT}}catch(I){n.e(I)}finally{n.f()}}(),Pn(n),n.sprite.visible){var E,m=Object(Bt.a)(o);try{for(m.s();!(E=m.n()).done;){var f=E.value;if(bn(n,f))return void(xn(n,f)?Rn(n,f):Ln(n))}}catch(I){m.e(I)}finally{m.f()}var h,_=Object(Bt.a)(t.aliens);try{for(_.s();!(h=_.n()).done;){var w=h.value;w.sprite.visible&&Nn(n,w)&&Bn(n,w)}}catch(I){_.e(I)}finally{_.f()}}Xn()}function yn(){Tn(window.world.ship);var e,t=Object(Bt.a)(window.world.aliens);try{for(t.s();!(e=t.n()).done;){Tn(e.value)}}catch(n){t.e(n)}finally{t.f()}}function Tn(e){var t,n=Object(Bt.a)(e.equip);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.type===a.EQUIP_TYPE_PRIMARY_WEAPON&&r.cool>0&&(r.cool-=1)}}catch(i){n.e(i)}finally{n.f()}}function Sn(e){var t,n=Object(Bt.a)(e.equip);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.type===a.EQUIP_TYPE_PRIMARY_WEAPON&&r.cool>0&&(r.cool=0)}}catch(i){n.e(i)}finally{n.f()}}function An(e){var t,n=Object(Bt.a)(e.equip);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.type===a.EQUIP_TYPE_REPAIR_DROID&&e.armor<e.armorMax){var o={titanium:r.repairSpeed,gold:0,uranium:0};i.canAfford(null,e,o)&&(e.armor+=r.repairSpeed,i.payResourceCost(null,e,o))}}}catch(u){n.e(u)}finally{n.f()}}function Pn(e){var t=window.world.bgSprite;t.tilePosition.x=100-e.x+a.HALF_SCREEN_WIDTH,t.tilePosition.y=100-e.y+a.HALF_SCREEN_HEIGHT}function Mn(e,t){return e.x+a.HALF_SCREEN_WIDTH+t.radius<t.x||e.x-a.HALF_SCREEN_WIDTH-t.radius>t.x||e.y+a.HALF_SCREEN_HEIGHT+t.radius<t.y||e.y-a.HALF_SCREEN_HEIGHT-t.radius>t.y?(t.sprite.visible=!1,!1):(t.sprite.visible=!0,t.sprite.x=t.x-e.x+a.HALF_SCREEN_WIDTH,t.sprite.y=t.y-e.y+a.HALF_SCREEN_HEIGHT,!0)}function bn(e,t){var n,i=r.getVertexData(e.x,e.y,e.sprite),o=Object(Bt.a)(i);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(r.distanceBetween(u[0],u[1],t.x,t.y)<t.radius-a.ALLOWED_OVERLAP)return!0}}catch(s){o.e(s)}finally{o.f()}return!1}function Nn(e,t){var n,i=r.getVertexData(e.x,e.y,e.sprite),o=Object(Bt.a)(i);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(t.radius)if(r.distanceBetween(u[0],u[1],t.x,t.y)<t.radius-a.ALLOWED_OVERLAP)return!0}}catch(s){o.e(s)}finally{o.f()}return!1}function xn(e,t){var n=r.normalizeRadian(Math.atan2(e.y-t.y,e.x-t.x)),a=Math.abs(e.sprite.rotation-n),i=Math.abs(e.vx)+Math.abs(e.vy),o=(a<e.crashAngle||a>2*Math.PI-e.crashAngle)&&i<e.crashSpeed;if(o)return o;var u=Math.max(i-e.crashSpeed,0),s=Math.max(a-e.crashAngle,0);return s>Math.PI&&(s=2*Math.PI-a-e.crashAngle),Yn(e,(u/3+s)*e.armorMax,Cn),e.armor>0}function Rn(e,t){window.world.selectedPlanet=t,e.vx=0,e.vy=0;var n=r.normalizeRadian(Math.atan2(e.y-t.y,e.x-t.x)),o=t.radius+e.sprite.width/2;e.x=t.x+o*Math.cos(n),e.y=t.y+o*Math.sin(n),e.sprite.rotation=n,i.changeGameState(a.GAME_STATE.MANAGE)}function Ln(e){e.vx=0,e.vy=0,Hn(e,Cn)}function gn(e){var t,n=null,r=Object(Bt.a)(window.world.explosions);try{for(r.s();!(t=r.n()).done;){var o=t.value;if(!o.visible){n=o;break}}}catch(s){r.e(s)}finally{r.f()}n||(n=i.createExplosionSprite());var u=window.world.ship;return n.visible=!0,n.globalX=e.x,n.globalY=e.y,n.x=e.x-u.x+a.HALF_SCREEN_WIDTH,n.y=e.y-u.y+a.HALF_SCREEN_HEIGHT,n}function Hn(e,t){e!==window.world.ship&&i.addAlienXp(e);var n=gn(e);e.sprite.visible=!1,n.play(),n.onLoop=function(){n.stop(),n.visible=!1,t&&t()}}function Cn(){var e=window.world.ship,t=window.world.selectedPlanet;if(e.sprite.visible=!1,e.resourcesMax=0,e.resources={titanium:0,gold:0,uranium:0},e.equip=[],e.armorMax=0,e.armor=0,!t||0===t.buildings.length){console.log("Looking for suitable planet");var n,r=Object(Bt.a)(window.world.planets);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(o.buildings.length>0){console.log("Found "+o.name+" with buildings"),window.world.selectedPlanet=o;break}}}catch(p){r.e(p)}finally{r.f()}t||(console.log("no planets with buildings"),window.world.selectedPlanet=window.world.planets[0])}var s=u.getAvailablePlanetXY(t,e,0,20,0),l=s.x,c=s.y,d=s.rotation;e.x=l,e.y=c,e.vx=0,e.vy=0,e.sprite.rotation=d,vn(),i.changeGameState(a.GAME_STATE.MANAGE)}function On(e,t){var n=e.turnSpeed,i=Wn(e,a.EQUIP_TYPE_TURN);i&&(n+=i.boostSpeed),e.sprite.rotation=r.normalizeRadian(e.sprite.rotation+n*(t?-1:1))}function Fn(e,t){var n=Wn(e,a.EQUIP_TYPE_THRUSTER);if(n){var i=r.normalizeRadian(e.sprite.rotation+(t?-1:1)*Math.PI/2);n.thrustType===a.THRUST_MOMENTUM?(e.vx+=n.thrustSpeed*Math.cos(i),e.vy+=n.thrustSpeed*Math.sin(i)):n.thrustType===a.THRUST_BLINK?(e.x+=n.thrustSpeed*Math.cos(i),e.y+=n.thrustSpeed*Math.sin(i)):console.warn("Unable to use thruster with type "+n.thrustType)}}function Dn(e){var t=Wn(e,a.EQUIP_TYPE_PRIMARY_WEAPON);t&&t.cool<=0&&(Un(e,t),t.cool=t.coolTime)}function Un(e,t){var n=function(e){var t,n=Object(Bt.a)(window.world.bullets);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!r.active&&r.fileName===e)return r.active=!0,r.sprite.visible=!0,r}}catch(s){n.e(s)}finally{n.f()}var i={active:!0,damage:0,x:0,y:0,vx:0,vy:0,lifetime:1,fileName:e},o=window.PIXI.loader.resources[a.SPRITESHEET_JSON],u=new window.PIXI.Sprite(o.textures[e]);return u.x=-100,u.y=-100,u.anchor.set(.5,.5),u.scale.set(.5,.5),window.world.app.stage.addChild(u),i.sprite=u,window.world.bullets.push(i),i}(t.bulletFile);n.lifetime=t.lifetime,n.damage=t.damage,n.vx=e.vx+t.speed*Math.cos(e.sprite.rotation),n.vy=e.vy+t.speed*Math.sin(e.sprite.rotation),n.x=e.x+Math.max(e.sprite.width,e.sprite.height)/2*Math.cos(e.sprite.rotation),n.y=e.y+Math.max(e.sprite.width,e.sprite.height)/2*Math.sin(e.sprite.rotation)}function jn(e){e.active=!1,e.sprite.visible=!1,e.sprite.x=-100,e.sprite.y=-100,e.vx=0,e.vy=0}function kn(){var e,t=window.world.ship,n=Object(Bt.a)(window.world.bullets);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.active&&(r.x=r.x+r.vx,r.y=r.y+r.vy,r.sprite.x=r.x-t.x+a.HALF_SCREEN_WIDTH,r.sprite.y=r.y-t.y+a.HALF_SCREEN_HEIGHT,r.lifetime=r.lifetime-1,r.lifetime<=0&&jn(r),Gn(r))}}catch(i){n.e(i)}finally{n.f()}}function Gn(e){var t,n=window.world.ship,a=Object(Bt.a)(window.world.planets);try{for(a.s();!(t=a.n()).done;){var i=t.value;r.distanceBetween(i.x,i.y,e.x,e.y)<i.radius&&jn(e)}}catch(l){a.e(l)}finally{a.f()}n.sprite.visible&&n.sprite.containsPoint({x:e.sprite.x,y:e.sprite.y})&&qn(e,n,Cn);var o,u=Object(Bt.a)(window.world.aliens);try{for(u.s();!(o=u.n()).done;){var s=o.value;s.sprite.visible&&s.radius&&r.distanceBetween(s.x,s.y,e.x,e.y)<=s.radius&&qn(e,s,null)}}catch(l){u.e(l)}finally{u.f()}}function qn(e,t,n){Yn(t,e.damage,n),jn(e)}function Yn(e,t,n){e.armor=e.armor-t,e.armor<=0&&(e.armor=0,Hn(e,n))}function Bn(e,t){var n=e.armor,r=t.armor;Yn(t,n,null),Yn(e,r,window.world.ship===e?Cn:null),e.sprite.visible||(e.vx=0,e.vy=0)}function Wn(e,t){var n,r=Object(Bt.a)(e.equip);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.type===t)return a}}catch(i){r.e(i)}finally{r.f()}return null}function Xn(){var e=window.world.miniMapGraphics,t=window.world.ship,n=a.SCREEN_HEIGHT-a.MINIMAP_HEIGHT,r=a.MINIMAP_WIDTH,i=a.SCREEN_HEIGHT;e.clear(),e.beginFill(a.DARK_GREY),e.lineStyle(1,a.MED_GREY),e.drawRect(0,n,r,i),e.endFill();var o,u=Object(Bt.a)(window.world.planets);try{for(u.s();!(o=u.n()).done;){var s=o.value;if(Vn(t,s)){var l=0+a.HALF_MINIMAP_WIDTH+(s.x-t.x)*a.MINIMAP_SCALE_X,c=n+a.HALF_MINIMAP_HEIGHT+(s.y-t.y)*a.MINIMAP_SCALE_Y;e.lineStyle(1,a.LIGHT_GREY),e.drawCircle(l,c,s.radius*a.MINIMAP_SCALE_X);var d,p=Object(Bt.a)(s.buildings);try{for(p.s();!(d=p.n()).done;){var E=d.value,m=0+a.HALF_MINIMAP_WIDTH+(E.x-t.x)*a.MINIMAP_SCALE_X-1.5,f=n+a.HALF_MINIMAP_HEIGHT+(E.y-t.y)*a.MINIMAP_SCALE_Y-1.5;e.lineStyle(1,a.RED),e.drawRect(m,f,3,3)}}catch(h){p.e(h)}finally{p.f()}}}}catch(h){u.e(h)}finally{u.f()}e.lineStyle(1,a.WHITE),e.drawCircle(0+a.MINIMAP_WIDTH/2,n+a.MINIMAP_HEIGHT/2,2)}function Qn(e,t){if(window.world.gameState===a.GAME_STATE.MANAGE){var n,i=window.world.ship,o=i.x+1/a.MINIMAP_SCALE_X*(e-a.HALF_MINIMAP_WIDTH),u=i.y+1/a.MINIMAP_SCALE_X*(t-(a.SCREEN_HEIGHT-a.MINIMAP_HEIGHT)-a.HALF_MINIMAP_HEIGHT),s=Object(Bt.a)(window.world.planets);try{for(s.s();!(n=s.n()).done;){var l=n.value;r.distanceBetween(o,u,l.x,l.y)<=l.radius&&(window.world.selectedPlanet=l)}}catch(c){s.e(c)}finally{s.f()}}}function Vn(e,t){return!(e.x+a.HALF_MINIMAP_VIEW_WIDTH+t.radius<t.x||e.x-a.HALF_MINIMAP_VIEW_WIDTH-t.radius>t.x||e.y+a.HALF_MINIMAP_VIEW_HEIGHT+t.radius<t.y||e.y-a.HALF_MINIMAP_VIEW_HEIGHT-t.radius>t.y)}function Kn(){console.log("enter manage state")}function Jn(e){(window.world.keys.up.isDown||window.world.keys.w.isDown)&&window.world.ship.sprite.visible&&function(){var e=window.world,t=e.ship;i.changeGameState(a.GAME_STATE.FLY);var n=r.calcGravity(t.x,t.y,e.selectedPlanet);t.vx=n.x*-a.TAKEOFF_SPEED,t.vy=n.y*-a.TAKEOFF_SPEED}()}function zn(){var e=window.world,t={type:a.BUILDING_TYPE_MINE},n=e.selectedPlanet,r=e.ship,u=window.PIXI.Loader.shared.resources[a.SPRITESHEET_JSON].spritesheet;t.sprite=new window.PIXI.AnimatedSprite(u.animations[a.MINE_FILE]),t.sprite.animationSpeed=a.MINE_ANIMATION_SPEED,t.sprite.play(),t.sprite.anchor.set(.5,.5),t.sprite.scale.set(a.MINE_SCALE,a.MINE_SCALE),t.sprite.rotation=Zn(r,n,a.MINE_PLACEMENT_FROM_SHIP);var s=$n(n,r,t.sprite.rotation,t.sprite.height/2,0),l=s.x,c=s.y,d=s.rotation;null!==l?(t.x=l,t.y=c,t.sprite.rotation=d,t.sprite.x=t.x-n.x,t.sprite.y=t.y-n.y,n.sprite.addChild(t.sprite),i.payResourceCost(n,r,a.MINE_COST),n.buildings.push(t),o.drawMiniMap()):console.warn("Unable to place mine")}function Zn(e,t,n){var a=e.sprite.rotation+Math.PI/2,i=e.x+n*Math.cos(a),o=e.y+n*Math.sin(a);return r.normalizeRadian(Math.atan2(o-t.y,i-t.x))}function $n(e,t,n,r,i){return er(e,t,n,r)?{x:e.x+(e.radius+10)*Math.cos(n),y:e.y+(e.radius+10)*Math.sin(n),rotation:n}:i>2*Math.PI/a.BUILDING_PLACEMENT_ROTATION_INCREMENT?{x:null,y:null,rotation:null}:$n(e,t,n+a.BUILDING_PLACEMENT_ROTATION_INCREMENT,r,++i)}function er(e,t,n,a){var i,o=e.x+(e.radius+10)*Math.cos(n),u=e.y+(e.radius+10)*Math.sin(n),s=r.distanceBetween(o,u,t.x,t.y),l=t.sprite.height/2,c=Object(Bt.a)(e.buildings);try{for(c.s();!(i=c.n()).done;){var d=i.value,p=r.distanceBetween(o,u,d.x,d.y);p<s&&(s=p,l=d.sprite.height)}}catch(E){c.e(E)}finally{c.f()}return s>a/2+l/2+15}function tr(e,t,n,r,a){var i=Number(r);isNaN(i)&&(i=0);var o=i;(""===r||e[n]-i<0)&&(o=e[n]);var u=a-(t.titanium+t.gold+t.uranium);u<o&&(o=u),t[n]+=o,e[n]-=o}function nr(){var e=window.world,t=e.selectedPlanet,n=e.ship,r={type:a.BUILDING_TYPE_FACTORY},u=window.PIXI.Loader.shared.resources[a.SPRITESHEET_JSON].spritesheet;r.sprite=new window.PIXI.Sprite(u.textures[a.FACTORY_FILE]),r.sprite.anchor.set(.5,.5),r.sprite.scale.set(a.FACTORY_SCALE,a.FACTORY_SCALE),r.sprite.rotation=Zn(n,t,a.FACTORY_PLACEMENT_FROM_SHIP);var s=$n(t,n,r.sprite.rotation,r.sprite.height/2,0),l=s.x,c=s.y,d=s.rotation;null!==l?(r.x=l,r.y=c,r.sprite.rotation=d,r.sprite.x=r.x-t.x,r.sprite.y=r.y-t.y,t.sprite.addChild(r.sprite),i.payResourceCost(t,n,a.FACTORY_COST),t.buildings.push(r),o.drawMiniMap()):console.warn("Unable to place factory")}function rr(e){var t=window.world.selectedPlanet,n=i.createShip(e);t.ships.push(n)}function ar(e,t){var n=window.world.ship;if(ir(e,t)){or(n,t),ur(e);var r=t.radius+e.sprite.width/2;e.x=t.x+r*Math.cos(e.sprite.rotation),e.y=t.y+r*Math.sin(e.sprite.rotation);var a,i=Object(Bt.a)(window.world.planets);try{for(i.s();!(a=i.n()).done;){var u=a.value;o.planetInView(e,u)}}catch(s){i.e(s)}finally{i.f()}}else console.warn("Unable to remove ship from planet ",e," planet=",t)}function ir(e,t){var n=t.ships.filter((function(t){return t!==e})),r=n.length<t.ships.length;return t.ships=n,r}function or(e,t){e.sprite.visible&&e.armorMax>0&&t.ships.push(e)}function ur(e){var t=window.world.app.stage,n=window.world.ship;return window.world.ship=e,n&&(e.sprite.rotation=n.sprite.rotation,o.resetWeaponsCool(n),t.removeChild(n.sprite)),t.addChild(e.sprite),e}function sr(e){var t,n=Object(Bt.a)(e.buildings);try{for(n.s();!(t=n.n()).done;){if(t.value.type===a.BUILDING_TYPE_FACTORY)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}function lr(e){var t=window.world.selectedPlanet,n=Xt.a.cloneDeep(e);n.id=Xt.a.uniqueId(),t.equip.push(n)}function cr(e){return{titanium:e.armorMax-e.armor,gold:0,uranium:0}}function dr(e,t){var n=cr(t),r=t.armorMax-t.armor;if(!i.canAfford(e,t,n)){var a=e.resources.stored.titanium+t.resources.titanium;n.titanium=a,r=a}i.payResourceCost(e,t,n),t.armor+=r}function pr(){var e,t=window.world.ship,n=Object(Bt.a)(window.world.aliens);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r.sprite.visible){var i=!1;r.aiType===a.ALIEN_AI_TURRET?mr(r):r.aiType===a.ALIEN_AI_CREEPER&&(i=fr(r)),i&&(hr(r),_r(r)),r.sprite.x=r.x-t.x+a.HALF_SCREEN_WIDTH,r.sprite.y=r.y-t.y+a.HALF_SCREEN_HEIGHT}}}catch(o){n.e(o)}finally{n.f()}}function Er(e,t){var n=window.world.ship,a=r.normalizeRadian(Math.atan2(n.y-e.y,n.x-e.x)),i=t*Math.random()*(r.randomBool()?-1:1);e.sprite.rotation=r.normalizeRadian(a+i),o.firePrimaryWeapon(e),e.sprite.rotation=a}function mr(e){var t=window.world.ship;r.distanceBetween(e.x,e.y,t.x,t.y)<300&&Er(e,.7)}function fr(e){var t=window.world.ship,n=!1;if(r.distanceBetween(e.x,e.y,t.x,t.y)<a.SCREEN_WIDTH){var o,u=r.directionTo(e.x,e.y,t.x,t.y),s=r.dirComponents(u,25*e.propulsion),l=s.xAmt,c=s.yAmt,d=Object(Bt.a)(i.getPlanetsNear(e.x,e.y));try{for(d.s();!(o=d.n()).done;){var p=o.value;if(r.distanceBetween(e.x+l,e.y+c,p.x,p.y)<p.radius+e.radius+10){var E=r.directionTo(e.x,e.y,p.x,p.y),m=E-u,f=m>=0?-1:1;Math.abs(m)>Math.PI&&(f*=-1);var h=E+f*Math.PI/2,_=r.dirComponents(h,20*e.propulsion);l=_.xAmt,c=_.yAmt}}}catch(w){d.e(w)}finally{d.f()}e.x+=l,e.y+=c,n=!0}return r.distanceBetween(e.x,e.y,t.x,t.y)<300&&Er(e,.15),n}function hr(e){var t,n=Object(Bt.a)(window.world.planets);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a.sprite.visible)r.distanceBetween(e.x,e.y,a.x,a.y)<=e.radius+a.radius&&o.destroyShip(e,null)}}catch(i){n.e(i)}finally{n.f()}}function _r(e){var t,n=Object(Bt.a)(window.world.aliens);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a.sprite.visible&&e!==a)r.distanceBetween(e.x,e.y,a.x,a.y)<=e.radius+a.radius&&o.shipsCollide(e,a)}}catch(i){n.e(i)}finally{n.f()}}n(18),n(19);var wr=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(){return Object(E.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){var e=window.world;return c.a.createElement("div",{className:"section"},c.a.createElement("div",null,"Ship"),c.a.createElement("div",null,"Armor ",Math.floor(e.ship.armor)," / ",e.ship.armorMax," "),c.a.createElement("div",null,"Equip (max ",e.ship.equipMax,")",e.ship.equip.map((function(e,t){return c.a.createElement("span",{key:t,className:"equip"},e.name)}))),c.a.createElement("div",{className:"section"},"Resources"),c.a.createElement("div",null," Titatium ",Math.floor(e.ship.resources.titanium)),c.a.createElement("div",null," Gold ",Math.floor(e.ship.resources.gold)),c.a.createElement("div",null," Uranium ",Math.floor(e.ship.resources.uranium)))}}]),n}(c.a.Component),Ir=(n(20),function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(e){var r;return Object(E.a)(this,n),(r=t.call(this,e)).state={titanium:"",gold:"",uranium:""},r}return Object(m.a)(n,[{key:"valueChanged",value:function(e,t){var n=Object.assign({},this.state);n[t]=e.target.value,this.setState(n)}},{key:"render",value:function(){var e=this,t=window.world,n=window.world.selectedPlanet,r=window.world.ship;return c.a.createElement("div",{className:"planet-info"},c.a.createElement("div",{className:"section"},c.a.createElement("b",null,"Name")," ",t.selectedPlanet.name),c.a.createElement("div",{className:"build-button"},c.a.createElement("button",{disabled:!i.canAfford(n,r,a.MINE_COST),onClick:function(){return u.buildMine()}},"Build Mine"),"Cost: T:",a.MINE_COST.titanium," G:",a.MINE_COST.gold),c.a.createElement("div",{className:"build-button"},c.a.createElement("button",{disabled:!i.canAfford(n,r,a.FACTORY_COST),onClick:function(){return u.buildFactory()}},"Build Factory"),"Cost: T:",a.FACTORY_COST.titanium," G:",a.FACTORY_COST.gold," U:",a.FACTORY_COST.uranium),c.a.createElement("div",{className:"section"},c.a.createElement("b",null,"Resources")),c.a.createElement("div",null,"Titatium ",Math.floor(n.resources.raw.titanium)),c.a.createElement("div",null,"Gold ",Math.floor(n.resources.raw.gold)),c.a.createElement("div",null,"Uranium ",Math.floor(n.resources.raw.uranium)),c.a.createElement("table",null,c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"Resource"),c.a.createElement("th",null,"Planet"),c.a.createElement("th",null,"Transfer"),c.a.createElement("th",null,"Ship (",r.resourcesMax,")"))),c.a.createElement("tbody",null,c.a.createElement("tr",null,c.a.createElement("td",null,"Titanium"),c.a.createElement("td",null,Math.floor(n.resources.stored.titanium)),c.a.createElement("td",null,c.a.createElement("span",{className:"transfer-button",onClick:function(){return u.transferResource(r.resources,n.resources.stored,"titanium",e.state.titanium,a.PLANET_RESOURCE_MAX)}},"\u2bc7"),c.a.createElement("input",{type:"text",className:"transfer-input",value:this.state.titanium,onChange:function(t){return e.valueChanged(t,"titanium")}}),c.a.createElement("span",{className:"transfer-button",onClick:function(){return u.transferResource(n.resources.stored,r.resources,"titanium",e.state.titanium,r.resourcesMax)}},"\u2bc8")),c.a.createElement("td",null,Math.floor(r.resources.titanium))),c.a.createElement("tr",null,c.a.createElement("td",null,"Gold"),c.a.createElement("td",null,Math.floor(n.resources.stored.gold)),c.a.createElement("td",null,c.a.createElement("span",{className:"transfer-button",onClick:function(){return u.transferResource(r.resources,n.resources.stored,"gold",e.state.gold,a.PLANET_RESOURCE_MAX)}},"\u2bc7"),c.a.createElement("input",{type:"text",className:"transfer-input",value:this.state.gold,onChange:function(t){return e.valueChanged(t,"gold")}}),c.a.createElement("span",{className:"transfer-button",onClick:function(){return u.transferResource(n.resources.stored,r.resources,"gold",e.state.gold,r.resourcesMax)}},"\u2bc8")),c.a.createElement("td",null,Math.floor(r.resources.gold))),c.a.createElement("tr",null,c.a.createElement("td",null,"Uranium"),c.a.createElement("td",null,Math.floor(n.resources.stored.uranium)),c.a.createElement("td",null,c.a.createElement("span",{className:"transfer-button",onClick:function(){return u.transferResource(r.resources,n.resources.stored,"uranium",e.state.uranium,a.PLANET_RESOURCE_MAX)}},"\u2bc7"),c.a.createElement("input",{type:"text",className:"transfer-input",value:this.state.uranium,onChange:function(t){return e.valueChanged(t,"uranium")}}),c.a.createElement("span",{className:"transfer-button",onClick:function(){return u.transferResource(n.resources.stored,r.resources,"uranium",e.state.uranium,r.resourcesMax)}},"\u2bc8")),c.a.createElement("td",null,Math.floor(r.resources.uranium))))))}}]),n}(c.a.Component)),vr=(n(21),n(22),n(23),function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(e){var r;return Object(E.a)(this,n),(r=t.call(this,e)).state={},r}return Object(m.a)(n,[{key:"build",value:function(e){e.objType===a.OBJ_SHIP?u.buildShip(this.props.template):e.objType===a.OBJ_EQUIP&&u.buildEquip(this.props.template)}},{key:"render",value:function(){var e=this,t=window.world,n=t.selectedPlanet,r=t.ship;return c.a.createElement("div",{className:"build-button"},c.a.createElement("button",{disabled:!u.hasFactory(n)||!i.canAfford(n,r,this.props.template.cost),onClick:function(){return e.build(e.props.template)}},this.props.template.name),c.a.createElement("span",{className:"cost"},"Cost: T:",this.props.template.cost.titanium," G:",this.props.template.cost.gold," U:",this.props.template.cost.uranium))}}]),n}(c.a.Component)),yr=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(e){var r;return Object(E.a)(this,n),(r=t.call(this,e)).state={},r}return Object(m.a)(n,[{key:"render",value:function(){return c.a.createElement("div",{className:"factory-info"},c.a.createElement("div",{className:"title"}," Ships "),c.a.createElement("div",{className:"build-ship"},window.world.blueprints.ship.map((function(e,t){return c.a.createElement(vr,{key:"ship"+t,template:e})}))),c.a.createElement("div",{className:"title"}," Equipment "),c.a.createElement("div",{className:"build-equip"},window.world.blueprints.equip.map((function(e,t){return c.a.createElement(vr,{key:"equip"+t,template:e})}))))}}]),n}(c.a.Component),Tr=(n(24),n(25),function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(e){var r;return Object(E.a)(this,n),(r=t.call(this,e)).state={},r}return Object(m.a)(n,[{key:"changeEquip",value:function(e,t,n,r){n&&(e.equip.push(n),this.removeEquip(t,n));var a=Xt.a.remove(e.equip,(function(e){return e.id===r.target.value}))[0];if(a){if(n){var i=Xt.a.findIndex(t.equip,{id:n.id});i>=0?t.equip.splice(i,1,a):console.warn("index "+i+" Could not find oldEquip ",n,"on ship ",t)}else t.equip.push(a);this.addEquip(t,a)}else Xt.a.remove(t.equip,(function(e){return e.id===n.id}))}},{key:"addEquip",value:function(e,t){t.type===a.EQUIP_TYPE_ARMOR?(e.armor===e.armorMax&&(e.armor+=t.armorAmt),e.armorMax+=t.armorAmt):t.type===a.EQUIP_TYPE_STORAGE&&(e.resourcesMax+=t.storageAmount)}},{key:"removeEquip",value:function(e,t){if(t.type===a.EQUIP_TYPE_ARMOR)e.armorMax-=t.armorAmt,e.armor>e.armorMax&&(e.armor=e.armorMax);else if(t.type===a.EQUIP_TYPE_STORAGE){e.resourcesMax-=t.storageAmount;var n=e.resources.titanium+e.resources.gold+e.resources.uranium;if(n>e.resourcesMax){var r=this.removeResource(e,"titanium",n-e.resourcesMax);r>0&&(r=this.removeResource(e,"gold",r)),r>0&&(r=this.removeResource(e,"uranium",r)),r>0&&console.warn("Cannot remove more resources from ship still owing "+r)}}}},{key:"removeResource",value:function(e,t,n){if(e.resources[t]-=n,e.resources[t]<0){var r=Math.abs(e.resources[t]);return e.resources[t]=0,r}return 0}},{key:"render",value:function(){var e=this,t=this.props.equip?c.a.createElement("option",{key:"selectedequip",value:this.props.equip.id},this.props.equip.name," (",this.props.equip.id,")"):null;return c.a.createElement("span",null,c.a.createElement("select",{value:this.props.equip?this.props.equip.id:"",onChange:function(t){return e.changeEquip(e.props.planet,e.props.ship,e.props.equip,t)}},c.a.createElement("option",{key:"none",value:"none"},"Choose..."),t,this.props.planet.equip.map((function(e,t){return c.a.createElement("option",{key:"equip-"+t,value:e.id},e.name," (",e.id,")")}))))}}]),n}(c.a.Component)),Sr=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(e){var r;return Object(E.a)(this,n),(r=t.call(this,e)).state={selectedShip:null,selectedEquip:null},r}return Object(m.a)(n,[{key:"viewShip",value:function(e){this.setState({selectedShip:e})}},{key:"viewEquip",value:function(e){this.setState({selectedEquip:e})}},{key:"startUsingShip",value:function(){u.switchToShip(this.state.selectedShip,window.world.selectedPlanet),this.setState({selectedShip:null})}},{key:"render",value:function(){var e=this,t=window.world,n=t.selectedPlanet,r=t.ship,a=this.state.selectedShip;!a&&r.sprite.visible&&(a=r);var i=[];if(a)for(var o=0;o<a.equipMax;o++){var s=a.equip.length>o?a.equip[o]:null;i.push(c.a.createElement(Tr,{key:s?s.id:"empty-"+o,planet:n,ship:a,equip:s}))}return c.a.createElement("div",null,c.a.createElement("div",{className:"storage-section"},c.a.createElement("div",{className:"title"},"Ships"),c.a.createElement("span",{className:"item-list"},(r.sprite.visible?[r]:[]).concat(n.ships).map((function(t,n){return c.a.createElement("div",{key:n,onClick:function(){return e.viewShip(t)},className:"ship ".concat(a===t?"selected-item":"non-selected-item")},t.name)}))),c.a.createElement("span",{className:"item-details"},null!=a&&c.a.createElement("div",null,c.a.createElement("div",{className:"button-row"},c.a.createElement("button",{onClick:function(){return e.startUsingShip()},disabled:a===r},"Use Ship")),c.a.createElement("div",{className:"item-attr"},c.a.createElement("b",null,"Name")," ",a.name," ",a.id),c.a.createElement("div",{className:"item-attr"},c.a.createElement("b",null,"Engine")," Propulsion:",Math.floor(100*a.propulsion)," Turn:",Math.floor(100*a.turnSpeed)),c.a.createElement("div",{className:"item-attr"},c.a.createElement("b",null,"Landing")," Speed:",Math.floor(a.crashSpeed)," Angle:",Math.floor(10*a.crashAngle)),c.a.createElement("div",{className:"item-attr"},c.a.createElement("b",null,"Armor"),Math.floor(a.armor)," of ",Math.floor(a.armorMax),c.a.createElement("button",{onClick:function(){return u.repairShip(n,a)},disabled:a.armorMax<=a.armor},"Repair"),"\xa0 Cost ",Math.floor(a.armorMax-a.armor)," titanium"),c.a.createElement("div",{className:"item-attr"},c.a.createElement("b",null,"Resources")," Max:",Math.floor(a.resourcesMax)),c.a.createElement("div",{className:"item-attr"},c.a.createElement("b",null,"Equip")," Max:",a.equipMax,i)))),c.a.createElement("div",{className:"storage-section"},c.a.createElement("div",{className:"title"},"Equipment"),c.a.createElement("span",{className:"item-list"},n.equip.map((function(t,n){return c.a.createElement("div",{key:n,onClick:function(){return e.viewEquip(t)},className:"item ".concat(e.state.selectedEquip===t?"selected-item":"non-selected-item")},t.name)}))),c.a.createElement("span",{className:"item-details"},null!=this.state.selectedEquip&&c.a.createElement("div",null,c.a.createElement("div",{className:"item-attr"},c.a.createElement("b",null,"Name")," ",this.state.selectedEquip.name," ",this.state.selectedEquip.id)))))}}]),n}(c.a.Component),Ar=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(e){var r;return Object(E.a)(this,n),(r=t.call(this,e)).state={activeTab:"planet"},r}return Object(m.a)(n,[{key:"isActive",value:function(){return"active-tab"}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"tab-set"},c.a.createElement("span",{className:"tab ".concat("planet"===this.state.activeTab?"active-tab":"non-active-tab"),onClick:function(){return e.setState({activeTab:"planet"})}},"Planet"),c.a.createElement("span",{className:"tab ".concat("factory"===this.state.activeTab?"active-tab":"non-active-tab"),onClick:function(){return e.setState({activeTab:"factory"})}},"Factory"),c.a.createElement("span",{className:"tab ".concat("storage"===this.state.activeTab?"active-tab":"non-active-tab"),onClick:function(){return e.setState({activeTab:"storage"})}},"Storage"),c.a.createElement("div",{className:"tab-body ".concat("planet"===this.state.activeTab?"":"tab-hidden")},c.a.createElement(Ir,null)),c.a.createElement("div",{className:"tab-body ".concat("factory"===this.state.activeTab?"":"tab-hidden")},c.a.createElement(yr,null)),c.a.createElement("div",{className:"tab-body ".concat("storage"===this.state.activeTab?"":"tab-hidden")},c.a.createElement(Sr,null)))}}]),n}(c.a.Component),Pr=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(){return Object(E.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){var e=window.world;return e.gameState===a.GAME_STATE.MANAGE?c.a.createElement(Ar,null):e.gameState===a.GAME_STATE.FLY?c.a.createElement(wr,null):c.a.createElement("div",null,"...")}}]),n}(c.a.Component),Mr=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(e){var u;return Object(E.a)(this,n),(u=t.call(this,e)).createPixiApp=function(){console.log("Creating PIXI app");var e=new window.PIXI.Application({width:a.SCREEN_WIDTH,height:a.SCREEN_HEIGHT});e.renderer.backgroundColor=a.BLACK,u.pixiRef.current.appendChild(e.view),window.PIXI.loader.add(a.SPRITESHEET_JSON).add(a.CRASH_JSON).load(u.setupGame),window.world.app=e},u.setupGame=function(){i.setupWorld(),u.setupKeyboardListeners(),i.changeGameState(a.GAME_STATE.FLY),window.world.app.renderer.plugins.interaction.on("pointerdown",(function(e){i.click(e)})),window.world.app.ticker.add((function(e){return u.mainLoop(e)}))},u.mainLoop=function(e){window.world.gameLoop&&(i.runBuildings(),o.moveBullets(),o.coolAllWeapons(),s.moveAliens(),window.world.gameLoop(e)),u.forceUpdate()},u.setupKeyboardListeners=function(){window.world.keys.left=r.keyboardListener("ArrowLeft"),window.world.keys.right=r.keyboardListener("ArrowRight"),window.world.keys.up=r.keyboardListener("ArrowUp"),window.world.keys.down=r.keyboardListener("ArrowDown"),window.world.keys.space=r.keyboardListener(" "),window.world.keys.w=r.keyboardListener("w"),window.world.keys.a=r.keyboardListener("a"),window.world.keys.s=r.keyboardListener("s"),window.world.keys.d=r.keyboardListener("d"),window.world.keys.q=r.keyboardListener("q"),window.world.keys.e=r.keyboardListener("e")},console.log("created world"),window.world=i.createEmptyWorld(),u.pixiRef=c.a.createRef(),u}return Object(m.a)(n,[{key:"componentDidMount",value:function(){console.log("mounted"),this.createPixiApp()}},{key:"render",value:function(){return c.a.createElement("table",null,c.a.createElement("tbody",null,c.a.createElement("tr",null,c.a.createElement("td",null,c.a.createElement("div",{ref:this.pixiRef})),c.a.createElement("td",{className:"info-panel"},c.a.createElement(Pr,null)))))}}]),n}(c.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));p.a.render(c.a.createElement(Mr,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[9,1,2]]]);
//# sourceMappingURL=main.2facf893.chunk.js.map